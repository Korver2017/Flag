(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e4bcf"],{9200:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"my-3",attrs:{id:"wrap"}},[s("div",{staticClass:"row my-4"},[s("div",{staticClass:"mb-0 d-flex align-items-center"},[s("h4",{staticClass:"text-left"},[s("router-link",{attrs:{to:{name:"organization"},tag:"a","active-class":"active"}},[s("a",[t._v(t._s(t.orgName))])]),t._v("\n        / "),s("router-link",{attrs:{to:{name:"project"},tag:"a","active-class":"active"}},[s("a",[t._v(t._s(t.proName))])])],1)]),t._m(0)]),s("ul",{staticClass:"nav nav-tabs"},[t._m(1),s("router-link",{staticClass:"nav-item",attrs:{to:{name:"project",params:{orgId:t.orgId,proId:t.proId}},tag:"li","active-class":"active"}},[s("a",{staticClass:"nav-link active"},[t._v("問題 "),s("span",{staticClass:"ml-2 badge badge-secondary"},[t._v("123")])])]),t._m(2),t._m(3),t._m(4),t._m(5),t._m(6)],1),s("div",{staticClass:"row my-4 d-flex justify-content-between"},[s("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Basic example"}},[s("router-link",{staticClass:"btn btn-outline-secondary",attrs:{to:{name:"label-list",params:{proId:t.proId}},tag:"button","active-class":"active"}},[t._v("\n        標籤\n      ")]),s("router-link",{staticClass:"btn btn-outline-secondary",attrs:{to:{name:"milestone",params:{proId:t.proId}},tag:"button","active-class":"active"}},[t._v("\n        里程碑\n      ")])],1),s("div",[s("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"new-milestone",params:{orgId:t.orgId,proId:t.proId}},tag:"button","active-class":"active"}},[t._v("\n        新的里程碑\n      ")])],1)]),s("hr"),s("div",{staticClass:"row"},[s("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Basic example"}},[s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(e){t.showOpened=!0}}},[t._v("\n        "+t._s(t.mileOpened)+" 個開啟中\n      ")]),s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(e){t.showOpened=!1}}},[t._v("\n        "+t._s(t.mileClosed)+" 個已關閉\n      ")])])]),s("div",{staticClass:"container my-4"},t._l(t.milestones,function(e,i){return s("ul",{staticClass:"list-group list-group-flush"},[!0===e.mileOpened&&!0===t.showOpened?s("li",{staticClass:"text-left list-group-item"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[t.milestones?s("router-link",{staticClass:"text-decoration-none",attrs:{to:{name:"milestone-detail",params:{mileId:e.mileId}},tag:"a","active-class":"active"}},[s("h3",{},[t._v(t._s(e.title))])]):t._e(),s("div",{staticClass:"row text-left"},[""!==t.milestones[i].dueDate?s("div",{staticClass:"mr-3"},[t._v(t._s(t.milestones[i].dueDate))]):t._e(),s("div",{staticClass:"mr-3"},[t._v(t._s(t.milestones[i].open)+" 個開啟中")]),s("div",{},[t._v(t._s(t.milestones[i].closed)+" 個已關閉")])])],1),s("div",{staticClass:"col-6"},[s("div",{staticClass:"progress"},[s("div",{staticClass:"progress-bar bg-success",style:{width:e.percentage+"%"},attrs:{role:"progressbar","aria-valuemin":"0","aria-valuemax":"100"}})]),s("div",{staticClass:"mt-2 text-right"},[s("router-link",{staticClass:"mr-3 btn btn-success",attrs:{to:{name:"edit-milestone",params:{mileId:t.milestones[i].mileId}},tag:"button","active-class":"active"}},[t._v("\n                編輯\n              ")]),!0===t.milestones[i].mileOpened&&!1===t.milestones[i].mileEditing?s("button",{staticClass:"mr-3 btn btn-warning",on:{click:function(e){e.preventDefault(),t.closeMilestone(i)}}},[t._v("關閉")]):!1===t.milestones[i].mileOpened&&!1===t.milestones[i].mileEditing?s("button",{staticClass:"mr-3 btn btn-primary",on:{click:function(e){e.preventDefault(),t.reopenMilestone(i)}}},[t._v("重新開啟")]):t._e(),!1===t.milestones[i].mileEditing?s("button",{staticClass:"mr-3 btn btn-danger",on:{click:function(e){t.deleteMile(i)}}},[t._v("刪除")]):t._e()],1)])])]):t._e(),!1===e.mileOpened&&!1===t.showOpened?s("li",{staticClass:"py-5 text-left list-group-item"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[t.milestones?s("router-link",{staticClass:"text-decoration-none",attrs:{to:{name:"milestone-detail",params:{mileId:e.mileId}},tag:"a","active-class":"active"}},[s("h3",{},[t._v(t._s(e.title))])]):t._e(),s("div",{staticClass:"row text-left"},[""!==t.milestones[i].dueDate?s("div",{staticClass:"mr-3"},[t._v(t._s(t.milestones[i].dueDate))]):t._e(),s("div",{staticClass:"mr-3"},[t._v(t._s(t.milestones[i].open)+" 個開啟中")]),s("div",{},[t._v(t._s(t.milestones[i].closed)+" 個已關閉")])])],1),s("div",{staticClass:"col-6"},[s("div",{staticClass:"progress"},[s("div",{staticClass:"progress-bar bg-success",style:{width:e.percentage+"%"},attrs:{role:"progressbar","aria-valuemin":"0","aria-valuemax":"100"}})]),s("div",{staticClass:"mt-2 text-right"},[s("router-link",{staticClass:"mr-3 btn btn-success",attrs:{to:{name:"edit-milestone",params:{mileId:t.milestones[i].mileId}},tag:"button","active-class":"active"}},[t._v("\n                編輯\n              ")]),!0===t.milestones[i].mileOpened&&!1===t.milestones[i].mileEditing?s("button",{staticClass:"mr-3 btn btn-warning",on:{click:function(e){e.preventDefault(),t.closeMilestone(i)}}},[t._v("關閉")]):!1===t.milestones[i].mileOpened&&!1===t.milestones[i].mileEditing?s("button",{staticClass:"mr-3 btn btn-primary",on:{click:function(e){e.preventDefault(),t.reopenMilestone(i)}}},[t._v("重新開啟")]):t._e(),!1===t.milestones[i].mileEditing?s("button",{staticClass:"mr-3 btn btn-danger",on:{click:function(e){t.deleteMile(i)}}},[t._v("刪除")]):t._e()],1)])])]):t._e()])}),0)])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ml-auto"},[s("div",{staticClass:"pr-3 btn-group btn-group-toggle",attrs:{"data-toggle":"buttons"}},[s("label",{staticClass:"border border-dark btn"},[s("input",{attrs:{type:"radio",name:"options",id:"option1",autocomplete:"off",checked:""}}),t._v(" 取消關注\n        ")]),s("label",{staticClass:"border border-dark btn"},[s("input",{attrs:{type:"radio",name:"options",id:"option2",autocomplete:"off"}}),t._v(" 8\n        ")])]),s("div",{staticClass:"pr-3 btn-group btn-group-toggle",attrs:{"data-toggle":"buttons"}},[s("label",{staticClass:"border border-dark btn"},[s("input",{attrs:{type:"radio",name:"options",id:"option1",autocomplete:"off",checked:""}}),t._v(" 收藏\n        ")]),s("label",{staticClass:"border border-dark btn"},[s("input",{attrs:{type:"radio",name:"options",id:"option2",autocomplete:"off"}}),t._v(" 0\n        ")])]),s("div",{staticClass:"pr-3 btn-group btn-group-toggle",attrs:{"data-toggle":"buttons"}},[s("label",{staticClass:"border border-dark btn"},[s("input",{attrs:{type:"radio",name:"options",id:"option1",autocomplete:"off",checked:""}}),t._v(" 複製\n        ")]),s("label",{staticClass:"border border-dark btn"},[s("input",{attrs:{type:"radio",name:"options",id:"option2",autocomplete:"off"}}),t._v(" 0\n        ")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"nav-item"},[s("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("程式碼")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"nav-item"},[s("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("合併請求"),s("span",{staticClass:"ml-2 badge badge-secondary"},[t._v("0")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"nav-item"},[s("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("版本發佈"),s("span",{staticClass:"ml-2 badge badge-secondary"},[t._v("0")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"nav-item"},[s("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("Wiki")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"nav-item"},[s("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("活動")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"ml-auto nav-item"},[s("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("儲存庫設定")])])}],a=(s("7514"),s("bf48")),l=s.n(a),o=s("133f"),r=s.n(o),c=(s("ca56"),{name:"milestone",components:{datePicker:r.a},data:function(){return{date:"",options:{format:"DD-MM-YYYY",useCurrent:!1},addingMile:!1,mileDesc:"",milestones:[],showOpened:!0,mileTitle:"",mileOpened:0,mileClosed:0,orgName:"",proName:"",mileIssues:[],editingMile:!1}},computed:{proId:function(){return this.$route.params.proId},orgId:function(){return this.$route.params.orgId}},created:function(){},mounted:function(){var t=this;t.showMile(),t.showRouteName()},methods:{showRouteName:function(){var t=this,e=l.a.Object.extend("Project"),s=new l.a.Query(e);s.get(t.proId).then(function(e){t.orgName=e.get("orgName"),t.proName=e.get("name")},function(t){})},showMile:function(){var t=this,e=[],s=l.a.Object.extend("Milestone"),i=new l.a.Query(s);i.equalTo("proId",t.proId),i.find().then(function(s){t.mileOpened=0,t.mileClosed=0;for(var i=function(i){var n=s[i];n.get("mileOpened")?t.mileOpened+=1:t.mileClosed+=1;var a=l.a.Object.extend("Issue"),o=new l.a.Query(a),r={},c=0;r.title=n.get("title"),o.equalTo("milestone",n.id),o.find().then(function(s){for(var i=0;i<s.length;i++)!1===s[i].get("issueOpened")&&(c+=1);var a=s.length,l=c;r.mileId=n.id,r.dueDate=n.get("dueDate"),r.mileDesc=n.get("mileDesc"),r.mileOpened=n.get("mileOpened"),r.all=a,r.closed=l,r.open=a-l,r.percentage=0===a?0:(l/a*100).toFixed(0),r.titleEditing=!1,r.newTitle="",r.mileEditing=!1,e.push(r),t.milestones=e})},n=0;n<s.length;n++)i(n)})},cancelAddMile:function(){var t=this;t.mileTitle="",t.date="",t.addingMile=!1},editMilestone:function(t){var e=this,s=l.a.Object.extend("Milestone"),i=new l.a.Query(s);i.get(e.milestones[t].mileId).then(function(s){s.set("title",e.milestones[t].newTitle),s.save().then(function(){e.milestones[t].newTitle="",e.showMile()})})},closeMilestone:function(t){var e=this,s=l.a.Object.extend("Milestone"),i=new l.a.Query(s);i.get(e.milestones[t].mileId).then(function(t){t.set("mileOpened",!1),t.save().then(function(){e.showMile()})})},reopenMilestone:function(t){var e=this,s=l.a.Object.extend("Milestone"),i=new l.a.Query(s);i.get(e.milestones[t].mileId).then(function(t){t.set("mileOpened",!0),t.save().then(function(){e.showMile()})})},updateMile:function(t){var e=this,s=e.milestones[t].mileId,i=l.a.Object.extend("Milestone"),n=new l.a.Query(i);n.get(s).then(function(s){s.set("title",e.milestones[t].title),s.set("dueDate",e.milestones[t].dueDate),s.set("mileDesc",e.milestones[t].mileDesc),s.save().then(function(s){e.cancelEditing(t)})})},deleteMile:function(t){var e=this,s=e.milestones[t].mileId,i=l.a.Object.extend("Milestone"),n=new l.a.Query(i);n.get(s).then(function(t){confirm("確定要刪除此 Milestone 嗎？")&&t.destroy().then(function(t){e.showMile()},function(t){})})},cancelEditing:function(t){var e=this,s=e.milestones[t].mileId,i=l.a.Object.extend("Milestone"),n=new l.a.Query(i);n.get(s).then(function(s){e.milestones[t].title=s.get("title"),e.milestones[t].dueDate=s.get("dueDate"),e.milestones[t].mileDesc=s.get("mileDesc")}).then(function(s){e.milestones[t].mileEditing=!1})},showMileDetail:function(t){var e=this,s=l.a.Object.extend("Issue"),i=new l.a.Query(s),n=[];i.equalTo("milestone",t),i.find().then(function(t){for(var e=0;e<t.length;e++){var s=t[e];n.push(s.get("name"))}}),e.mileIssues=n}}}),d=c,m=s("2877"),u=Object(m["a"])(d,i,n,!1,null,"3d48386c",null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d0e4bcf.0cbcdbf7.js.map