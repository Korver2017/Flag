{"version":3,"sources":["webpack:///./src/views/add-organization.vue?a974","webpack:///src/views/add-organization.vue","webpack:///./src/views/add-organization.vue?a577","webpack:///./src/views/add-organization.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","id","staticClass","_m","for","_v","directives","name","rawName","value","expression","type","domProps","on","input","$event","target","composing","orgName","click","addOrganization","cancelAdding","staticRenderFns","add_organizationvue_type_script_lang_js_","data","orgs","computed","user","authed","$store","state","userId","avatarHash","username","methods","getNewOrg","$vmc","Org","parse_default","a","Object","extend","query","Query","ary","equalTo","find","then","resp","_loop","i","obj","object","orgId","get","push","length","$router","org","set","addUnique","save","error","alert","views_add_organizationvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-2d21aabe.2afe3e32.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"wrap\"}},[_c('div',{staticClass:\"mt-5 col-8 mx-auto\"},[_vm._m(0),_c('div',{staticClass:\"border-light-theme\"},[_c('div',[_c('form',[_c('div',{staticClass:\"col-8 form-group mx-auto mt-5\"},[_c('div',{staticClass:\"row d-flex align-items-center justify-content-center\"},[_c('label',{staticClass:\"d-flex align-items-center mr-3 mb-0\",attrs:{\"for\":\"name\"}},[_vm._v(\"組織名稱\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.orgName),expression:\"orgName\"}],staticClass:\"col-8 form-control\",attrs:{\"type\":\"text\",\"id\":\"name\"},domProps:{\"value\":(_vm.orgName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.orgName=$event.target.value}}})]),_c('small',{staticClass:\"form-text text-muted\"},[_vm._v(\"Organization names should be short and memorable.\")])])])]),_c('div',{staticClass:\"my-4 text-center\"},[_c('button',{staticClass:\"mx-2 btn btn-success\",on:{\"click\":_vm.addOrganization}},[_vm._v(\"建立組織\")]),_c('button',{staticClass:\"mx-2 btn btn-secondary\",on:{\"click\":_vm.cancelAdding}},[_vm._v(\"取消\")])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"py-3 d-flex justify-content-center align-items-center bg-light-theme  border-light-theme border-bottom-0\"},[_c('h4',{staticClass:\"mb-0\"},[_vm._v(\"新增組織\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"wrap\">\r\n\r\n    <div class=\"mt-5 col-8 mx-auto\">\r\n\r\n      <div class=\"py-3 d-flex justify-content-center align-items-center bg-light-theme  border-light-theme border-bottom-0\">\r\n        <h4 class=\"mb-0\">新增組織</h4>\r\n      </div>\r\n\r\n      <div class=\"border-light-theme\">\r\n\r\n        <div>\r\n\r\n          <form>\r\n          \r\n            <div class=\"col-8 form-group mx-auto mt-5\">\r\n\r\n              <div class=\"row d-flex align-items-center justify-content-center\">\r\n              \r\n                <label class=\"d-flex align-items-center mr-3 mb-0\" for=\"name\">組織名稱</label>\r\n                <input v-model=\"orgName\" type=\"text\" class=\"col-8 form-control\" id=\"name\">\r\n\r\n              </div>\r\n\r\n              <small class=\"form-text text-muted\">Organization names should be short and memorable.</small>\r\n            </div>\r\n            \r\n          </form>\r\n\r\n        </div>\r\n\r\n        <div class=\"my-4 text-center\">\r\n\r\n          <button class=\"mx-2 btn btn-success\" @click=\"addOrganization\">建立組織</button>\r\n          <button class=\"mx-2 btn btn-secondary\" @click=\"cancelAdding\">取消</button>\r\n          \r\n        </div>\r\n        \r\n      </div>\r\n\r\n    </div>\r\n    \r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Parse from \"parse\";\r\n\r\n  export default {\r\n    \r\n    name: 'add-organization',\r\n\r\n    data () {\r\n      return {\r\n        orgName: '',\r\n        orgs: '',\r\n      }\r\n    },\r\n\r\n    computed: {\r\n      user () {\r\n        return {\r\n          authed: this.$store.state.user.authed,\r\n          userId: this.$store.state.user.userId,\r\n          avatarHash: this.$store.state.user.avatarHash,\r\n          username: this.$store.state.user.username,\r\n        }\r\n      },\r\n    },\r\n\r\n    methods: {\r\n      getNewOrg () {\r\n        let $vmc = this;\r\n        let Org = Parse.Object.extend ('Organization');\r\n        let query = new Parse.Query (Org);\r\n        let ary = [];\r\n\r\n        query.equalTo ('memberId', $vmc.user.userId);\r\n        query.find ()\r\n          .then (resp => {\r\n            for (let i = 0; i < resp.length; i ++) {\r\n              let obj = {};\r\n              let object = resp[i];\r\n              let query = new Parse.Query (Org);\r\n              obj.orgId = object.id;\r\n              query.get (object.id)\r\n                .then (resp => {\r\n                  obj.name = resp.get ('name');\r\n                  ary.push (obj);\r\n                });\r\n            }\r\n\r\n            $vmc.orgs = ary;\r\n          })\r\n          .then (resp => {\r\n            $vmc.$router.push ({ name: 'dashboard' });\r\n          })\r\n      },\r\n\r\n\r\n      cancelAdding () {\r\n        let $vmc = this;\r\n\r\n        $vmc.orgName = '';\r\n        $vmc.$router.push ({ name: 'dashboard' });\r\n      },\r\n\r\n\r\n      addOrganization () {\r\n        let $vmc = this;\r\n\r\n        if ($vmc.orgName === '') {\r\n          alert ('組織名稱不可空白');\r\n          return;\r\n        }\r\n        \r\n        let Org = Parse.Object.extend ('Organization')\r\n          , org = new Org ();\r\n\r\n        org.set ('name', $vmc.orgName);\r\n        org.addUnique ('memberId', $vmc.user.userId);\r\n        org.save ()\r\n          .then (resp => {\r\n            $vmc.getNewOrg ();\r\n            $vmc.orgName = '';\r\n            // Execute any logic that should take place after the object is saved.\r\n          }, (error) => {\r\n            // Execute any logic that should take place if the save fails.\r\n            // error is a Parse.Error with an error code and message.\r\n          })\r\n      },\r\n    },\r\n\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  \r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add-organization.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add-organization.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./add-organization.vue?vue&type=template&id=3548a0eb&scoped=true&\"\nimport script from \"./add-organization.vue?vue&type=script&lang=js&\"\nexport * from \"./add-organization.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3548a0eb\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}