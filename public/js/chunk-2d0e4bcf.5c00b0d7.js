(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e4bcf"],{9200:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container mt-5"},[n("form",{staticClass:"col-6 ml-auto"},[n("div",{staticClass:"form-group text-left"},[n("label",{attrs:{for:"name"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addMilestone(t)}}},[e._v("Add Milestone")]),n("div",{staticClass:"row"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.mileTitle,expression:"mileTitle",modifiers:{trim:!0}}],staticClass:"form-control col-8",attrs:{placeholder:"Milestone Name",id:"name"},domProps:{value:e.mileTitle},on:{input:function(t){t.target.composing||(e.mileTitle=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),n("button",{staticClass:"btn btn-success",on:{click:function(t){return t.preventDefault(),e.addMilestone(t)}}},[e._v("New Milestone")])])])]),n("div",{staticClass:"rwo text-left mb-5"},[n("button",{staticClass:"ml-3 btn btn-info",attrs:{type:"button"},on:{click:function(t){e.showOpened=!0}}},[e._v("\n      Open "),n("span",{staticClass:"badge badge-light"},[e._v(e._s(e.mileOpened))])]),n("button",{staticClass:"ml-3 btn btn-secondary",attrs:{type:"button"},on:{click:function(t){e.showOpened=!1}}},[e._v("\n      Closed "),n("span",{staticClass:"badge badge-light"},[e._v(e._s(e.mileClosed))])])]),e._l(e.milestones,function(t,i){return n("ul",{staticClass:"list-group list-group-flush"},[!1===t.mileOpened&&!1===e.showOpened?n("li",{staticClass:"py-5 text-left list-group-item"},[n("div",{staticClass:"row"},[n("h4",[e._v(e._s(t.title))]),n("div",{staticClass:"text-right mb-5 ml-auto mr-5"},[!1===e.milestones[i].titleEditing?n("button",{staticClass:"ml-auto btn btn-warning",on:{click:function(t){e.milestones[i].titleEditing=!0}}},[e._v("Edit Milestone")]):e._e(),!0===e.milestones[i].titleEditing?n("form",{staticClass:"ml-auto"},[n("div",{staticClass:"form-group text-left"},[n("label",{attrs:{for:"name"},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.editMilestone(i)}}},[e._v("New Milestone")]),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.milestones[i].newTitle,expression:"milestones[index].newTitle",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{placeholder:"New Milestone Name",id:"name"},domProps:{value:e.milestones[i].newTitle},on:{input:function(t){t.target.composing||e.$set(e.milestones[i],"newTitle",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),n("div",{staticClass:"text-right mt-3"},[n("button",{staticClass:"mr-3 btn btn-success",on:{click:function(t){t.preventDefault(),e.editMilestone(i)}}},[e._v("Edit Title")]),!0===e.milestones[i].mileOpened?n("button",{staticClass:"mr-3 btn btn-warning",on:{click:function(t){t.preventDefault(),e.closeMilestone(i)}}},[e._v("Close Milestone")]):n("button",{staticClass:"mr-3 btn btn-primary",on:{click:function(t){t.preventDefault(),e.reopenMilestone(i)}}},[e._v("Reopen Milestone")]),n("button",{staticClass:"mr-3 btn btn-danger",on:{click:function(t){t.preventDefault(),e.cancelEditing(i)}}},[e._v("Cancel")])])])]):e._e()])]),n("div",{staticClass:"mx-auto row"},[n("p",{staticClass:"mx-2"},[e._v(e._s(t.percentage)+"% complete")]),n("p",{staticClass:"mx-2"},[e._v(e._s(t.open)+" open")]),n("p",{staticClass:"mx-2"},[e._v(e._s(t.closed)+" closed")])]),n("div",{staticClass:"progress"},[n("div",{staticClass:"progress-bar bg-success",style:{width:t.percentage+"%"},attrs:{role:"progressbar","aria-valuemin":"0","aria-valuemax":"100"}})])]):e._e(),!0===t.mileOpened&&!0===e.showOpened?n("li",{staticClass:"py-5 text-left list-group-item"},[n("div",{staticClass:"row"},[n("h4",[e._v(e._s(t.title))]),n("div",{staticClass:"text-right mb-5 ml-auto mr-5"},[!1===e.milestones[i].titleEditing?n("button",{staticClass:"ml-auto btn btn-warning",on:{click:function(t){e.milestones[i].titleEditing=!0}}},[e._v("Edit Milestone")]):e._e(),!0===e.milestones[i].titleEditing?n("form",{staticClass:"ml-auto"},[n("div",{staticClass:"form-group text-left"},[n("label",{attrs:{for:"name"},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.editMilestone(i)}}},[e._v("New Milestone")]),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.milestones[i].newTitle,expression:"milestones[index].newTitle",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{placeholder:"New Milestone Name",id:"name"},domProps:{value:e.milestones[i].newTitle},on:{input:function(t){t.target.composing||e.$set(e.milestones[i],"newTitle",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),n("div",{staticClass:"text-right mt-3"},[n("button",{staticClass:"mr-3 btn btn-success",on:{click:function(t){t.preventDefault(),e.editMilestone(i)}}},[e._v("Edit Title")]),!0===e.milestones[i].mileOpened?n("button",{staticClass:"mr-3 btn btn-warning",on:{click:function(t){t.preventDefault(),e.closeMilestone(i)}}},[e._v("Close Milestone")]):n("button",{staticClass:"mr-3 btn btn-primary",on:{click:function(t){t.preventDefault(),e.reopenMilestone(i)}}},[e._v("Reopen Milestone")]),n("button",{staticClass:"mr-3 btn btn-danger",on:{click:function(t){t.preventDefault(),e.cancelEditing(i)}}},[e._v("Cancel")])])])]):e._e()])]),n("div",{staticClass:"mx-auto row"},[n("p",{staticClass:"mx-2"},[e._v(e._s(t.percentage)+"% complete")]),n("p",{staticClass:"mx-2"},[e._v(e._s(t.open)+" open")]),n("p",{staticClass:"mx-2"},[e._v(e._s(t.closed)+" closed")])]),n("div",{staticClass:"progress"},[n("div",{staticClass:"progress-bar bg-success",style:{width:t.percentage+"%"},attrs:{role:"progressbar","aria-valuemin":"0","aria-valuemax":"100"}})])]):e._e()])})],2)},s=[],l=(n("7514"),n("bf48")),o=n.n(l),a={name:"milestone",data:function(){return{milestones:[],showOpened:!0,mileTitle:"",mileOpened:0,mileClosed:0}},computed:{proId:function(){return this.$route.params.proId}},created:function(){},mounted:function(){var e=this;e.showMile()},methods:{showMile:function(){var e=this,t=[],n=o.a.Object.extend("Milestone"),i=new o.a.Query(n);i.equalTo("proId",e.proId),i.find().then(function(n){e.mileOpened=0,e.mileClosed=0;for(var i=function(i){var s=n[i];s.get("mileOpened")?e.mileOpened+=1:e.mileClosed+=1;var l=o.a.Object.extend("Issue"),a=new o.a.Query(l),r={},c=0;r.title=s.get("title"),a.equalTo("milestone",s.id),a.find().then(function(n){for(var i=0;i<n.length;i++)!1===n[i].get("issueOpened")&&(c+=1);var l=n.length,o=c;r.mileId=s.id,r.mileOpened=s.get("mileOpened"),r.all=l,r.closed=o,r.open=l-o,r.percentage=(o/l*100).toFixed(0),r.titleEditing=!1,r.newTitle="",t.push(r),e.milestones=t})},s=0;s<n.length;s++)i(s)})},addMilestone:function(){var e=this,t=o.a.Object.extend("Milestone"),n=new t;n.set("title",e.mileTitle),n.set("proId",e.proId),n.set("mileOpened",!0),n.save().then(function(t){e.showMile()},function(e){alert("Failed to create new object, with error code: "+e.message)})},editMilestone:function(e){var t=this,n=o.a.Object.extend("Milestone"),i=new o.a.Query(n);i.get(t.milestones[e].mileId).then(function(n){n.set("title",t.milestones[e].newTitle),n.save().then(function(){t.milestones[e].newTitle="",t.showMile()})})},closeMilestone:function(e){var t=this,n=o.a.Object.extend("Milestone"),i=new o.a.Query(n);i.get(t.milestones[e].mileId).then(function(e){e.set("mileOpened",!1),e.save().then(function(){t.showMile()})})},reopenMilestone:function(e){var t=this,n=o.a.Object.extend("Milestone"),i=new o.a.Query(n);i.get(t.milestones[e].mileId).then(function(e){e.set("mileOpened",!0),e.save().then(function(){t.showMile()})})},cancelEditing:function(e){var t=this;t.milestones[e].titleEditing=!1,t.milestones[e].newTitle=""}}},r=a,c=n("2877"),m=Object(c["a"])(r,i,s,!1,null,"5fbe13f7",null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2d0e4bcf.5c00b0d7.js.map