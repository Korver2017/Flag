(function(e){function t(t){for(var a,r,u=t[0],i=t[1],c=t[2],d=0,l=[];d<u.length;d++)r=u[d],o[r]&&l.push(o[r][0]),o[r]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);h&&h(t);while(l.length)l.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,r=1;r<n.length;r++){var u=n[r];0!==o[u]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={app:0},o={app:0},s=[];function u(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-2d0c5af8":"63777adc","chunk-2d0cc947":"31c39cb6","chunk-2d22c301":"f7c461e8","chunk-3acd4b64":"03a8986f","chunk-3fff1551":"a1e313a5","chunk-547950f4":"86e5ef26","chunk-bcda7f64":"eea59ac8","chunk-e19c91b0":"e1087bc7","chunk-ebcb20e0":"2a880b7b"}[e]+".js"}function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-3acd4b64":1,"chunk-547950f4":1,"chunk-bcda7f64":1,"chunk-e19c91b0":1,"chunk-ebcb20e0":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise(function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-2d0c5af8":"31d6cfe0","chunk-2d0cc947":"31d6cfe0","chunk-2d22c301":"31d6cfe0","chunk-3acd4b64":"56a180e5","chunk-3fff1551":"31d6cfe0","chunk-547950f4":"625d89ca","chunk-bcda7f64":"e39f2371","chunk-e19c91b0":"12ebbab7","chunk-ebcb20e0":"d3ed1eb7"}[e]+".css",o=i.p+a,s=document.getElementsByTagName("link"),u=0;u<s.length;u++){var c=s[u],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===a||d===o))return t()}var l=document.getElementsByTagName("style");for(u=0;u<l.length;u++){c=l[u],d=c.getAttribute("data-href");if(d===a||d===o)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var a=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");s.request=a,delete r[e],h.parentNode.removeChild(h),n(s)},h.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(h)}).then(function(){r[e]=0}));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var s=new Promise(function(t,n){a=o[e]=[t,n]});t.push(a[2]=s);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,i.nc&&d.setAttribute("nonce",i.nc),d.src=u(e),c=function(t){d.onerror=d.onload=null,clearTimeout(l);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+a+": "+r+")");s.type=a,s.request=r,n[1](s)}o[e]=void 0}};var l=setTimeout(function(){c({type:"timeout",target:d})},12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(t)},i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var h=d;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"28dc":function(e,t,n){"use strict";var a=n("d004"),r=n.n(a);r.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-white"},[n("router-link",{staticClass:"navbar-brand nav-item nav-link",attrs:{to:"/dashboard"}},[n("a",[e._v("Flag")])]),n("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarNavAltMarkup"}},[n("div",{staticClass:"navbar-nav"},[n("router-link",{staticClass:"mx-2 rounded nav-item nav-link",attrs:{to:"/dashboard",tag:"a","active-class":"active",exact:""}},[e._v("\n          Dashboard\n        ")]),n("router-link",{staticClass:"mx-2 rounded nav-item nav-link",attrs:{to:"/issue",tag:"a"}},[e._v("\n          Issues\n        ")]),n("router-link",{staticClass:"mx-2 rounded nav-item nav-link",attrs:{to:"/",tag:"a"}},[e._v("\n          Pull Requests\n        ")]),n("router-link",{staticClass:"mx-2 rounded nav-item nav-link",attrs:{to:"/",tag:"a"}},[e._v("\n          Explore\n        ")])],1),n("div",{staticClass:"d-flex align-items-center navbar-nav ml-auto mr-3"},[n("router-link",{staticClass:"mx-2 rounded nav-item nav-link",attrs:{to:"/",tag:"a"}},[e._v("\n          訊息\n        ")]),n("router-link",{staticClass:"mx-2 rounded nav-item nav-link",attrs:{to:"/",tag:"a"}},[e._v("\n          建立\n        ")]),n("div",{staticClass:"dropdown"},[n("a",{staticClass:"border-0 btn btn-outline-secondary dropdown-toggle",attrs:{href:"#",role:"button",id:"dropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[n("img",{staticClass:"rounded",staticStyle:{width:"25px",height:"25px"},attrs:{src:"https://www.gravatar.com/avatar/"+e.user.avatarHash,alt:""}})]),n("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuLink"}},[n("li",{staticClass:"dropdown-item"},[e._v("已登入用戶 "+e._s(e.user.username))]),n("hr"),n("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[e._v("個人訊息")]),n("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[e._v("標記星號")]),n("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[e._v("設定")]),n("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[e._v("說明")]),n("hr"),n("a",{staticClass:"dropdown-item",on:{click:e.logOut}},[e._v("登出")])])])],1)])],1),n("hr",{staticClass:"my-0"}),n("router-view")],1)},o=[],s=n("bf48"),u=n.n(s),i=n("8c4f");a["a"].use(i["a"]);var c=new i["a"]({mode:"history",base:"/",routes:[{path:"/signin",name:"signin",component:function(){return n.e("chunk-3fff1551").then(n.bind(null,"ac9e"))}},{path:"/dashboard",name:"dashboard",component:function(){return n.e("chunk-3acd4b64").then(n.bind(null,"4601"))}},{path:"/:orgId",name:"organization",component:function(){return n.e("chunk-2d0cc947").then(n.bind(null,"4f10"))}},{path:"/:orgId/:proId",name:"project",component:function(){return n.e("chunk-bcda7f64").then(n.bind(null,"616c"))}},{path:"/:orgId/:proId/issues/new",name:"add-issue",component:function(){return n.e("chunk-e19c91b0").then(n.bind(null,"715c"))}},{path:"/:orgId/:proId/:issueId",name:"issue",component:function(){return n.e("chunk-2d22c301").then(n.bind(null,"f1bb"))}},{path:"/:orgId/:proId/milestone",name:"milestone",component:function(){return n.e("chunk-547950f4").then(n.bind(null,"9200"))}},{path:"/:orgId/:proId/milestone/:mileId",name:"milestone-detail",component:function(){return n.e("chunk-ebcb20e0").then(n.bind(null,"bc84"))}},{path:"/:orgId/:proId/label-list",name:"label-list",component:function(){return n.e("chunk-2d0c5af8").then(n.bind(null,"3fc2"))}}]}),d={name:"Home",components:{},data:function(){return{token:"",username:""}},created:function(){var e=this;e.token=e.$cookie.get("token"),void 0!==e.token?e.$store.dispatch("user/autoSignin",e.token):e.$router.push("/signin")},computed:{user:function(){return{authed:this.$store.state.user.authed,userId:this.$store.state.user.userId,username:this.$store.state.user.username,avatarHash:this.$store.state.user.avatarHash}}},mounted:function(){},methods:{logOut:function(){var e=this;e.$cookie.remove("token"),e.$store.dispatch("user/logOut")}},watch:{}},l=d,h=(n("6294"),n("28dc"),n("2877")),p=Object(h["a"])(l,r,o,!1,null,"5e6edc88",null),f=p.exports,m=(n("4989"),n("ab8b"),n("2f62")),v=n("f499"),b=n.n(v),g=(n("7514"),n("81fa")),k=n.n(g),w=n("a78e"),y=n.n(w),C={namespaced:!0,state:{authed:!1,username:"",userId:"",avatarHash:"",input:{email:"",password:""}},mutations:{authed:function(e,t){!0===e.authed?(e.authed=!1,e.username="",e.input.email="",e.input.password="",c.push("/signin")):(e.authed=t.authed,e.username=t.username,e.userId=t.userId,e.avatarHash=t.avatarHash)},input:function(e,t){e.input.email=t.email||e.input.email||"",e.input.password=t.password||e.input.password||""}},actions:{signin:function(e){var t=e.state,n=e.commit,a=u.a.Object.extend("Account"),r=new u.a.Query(a);r.equalTo("email",t.input.email),r.find().then(function(e){e.length<1?alert("Email 錯誤"):(r.equalTo("password",t.input.password),r.find().then(function(e){if(e.length<1)alert("密碼錯誤");else{var t={alg:"HS256",typ:"JWT"},r={},o=k.a.jws.IntDate.get("now"),s=k.a.jws.IntDate.get("now + 1day"),i=e[0].id;r.nbf=o,r.iat=o,r.exp=s;var d=b()(t),l=b()(r),h=new u.a.Query(a);h.get(i).then(function(e){var t=e.get("secret"),a=k.a.jws.JWS.sign("HS256",d,l,t);e.set("token",a),e.save(),y.a.set("token",a);var r={};r.username=e.get("username"),r.authed=!0,r.userId=i,r.avatarHash=e.get("avatarHash"),n("authed",r),c.push("/dashboard")})}}))})},autoSignin:function(e,t){var n=e.commit,a=u.a.Object.extend("Account"),r=new u.a.Query(a);r.equalTo("token",t),r.find().then(function(e){for(var t=0;t<e.length;t++){var a=e[t],r={};r.username=a.get("username"),r.authed=!0,r.userId=a.id,r.avatarHash=a.get("avatarHash"),n("authed",r)}})},logOut:function(e){var t=e.commit;t("authed"),c.push("/signin")}}};a["a"].use(m["a"]);var x=new m["a"].Store({modules:{user:C}}),I=n("9ce6"),_=n.n(I),j=n("8237"),O=n.n(j),S=n("27ae"),$=n("1881"),H=n.n($);n("7f10");u.a.initialize("Ox33tQSpiscXrVvf4HKXsduw2ProZNCysXXGY5zT"),u.a.serverURL="https://parse.protype.tw/parse",a["a"].config.productionTip=!1,a["a"].prototype.$md5=O.a,a["a"].prototype.$j=k.a,a["a"].prototype.$cookie=y.a,a["a"].prototype.$base64=S["Base64"],a["a"].use(_.a),a["a"].use(H.a),new a["a"]({router:c,store:x,render:function(e){return e(f)}}).$mount("#app")},6294:function(e,t,n){"use strict";var a=n("7fba"),r=n.n(a);r.a},"7fba":function(e,t,n){},d004:function(e,t,n){}});
//# sourceMappingURL=app.90354bad.js.map