(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e4bcf"],{9200:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container my-4"},[n("h3",{staticClass:"my-5 text-left"},[n("router-link",{attrs:{to:{name:"organization"},tag:"a","active-class":"active"}},[n("a",[e._v(e._s(e.orgName))])]),e._v(" / \n    \n    "),n("router-link",{attrs:{to:{name:"project"},tag:"a","active-class":"active"}},[n("a",[e._v(e._s(e.proName))])])],1),n("div",{staticClass:"rwo text-left mb-5"},[n("button",{staticClass:"ml-3 btn btn-info",attrs:{type:"button"},on:{click:function(t){e.showOpened=!0}}},[e._v("\n      Open "),n("span",{staticClass:"badge badge-light"},[e._v(e._s(e.mileOpened))])]),n("button",{staticClass:"ml-3 btn btn-secondary",attrs:{type:"button"},on:{click:function(t){e.showOpened=!1}}},[e._v("\n      Closed "),n("span",{staticClass:"badge badge-light"},[e._v(e._s(e.mileClosed))])])]),e._l(e.milestones,function(t,s){return n("ul",{staticClass:"list-group list-group-flush"},[!1===t.mileOpened&&!1===e.showOpened?n("li",{staticClass:"py-5 text-left list-group-item"},[n("div",{staticClass:"row"},[n("h4",[e._v(e._s(t.title))]),n("div",{staticClass:"text-right mb-5 ml-auto mr-5"},[!1===e.milestones[s].titleEditing?n("button",{staticClass:"ml-auto btn btn-warning",on:{click:function(t){e.milestones[s].titleEditing=!0}}},[e._v("Edit Milestone")]):e._e(),!0===e.milestones[s].titleEditing?n("form",{staticClass:"ml-auto"},[n("div",{staticClass:"form-group text-left"},[n("label",{attrs:{for:"name"},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.editMilestone(s)}}},[e._v("New Milestone")]),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.milestones[s].newTitle,expression:"milestones[index].newTitle",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{placeholder:"New Milestone Name",id:"name"},domProps:{value:e.milestones[s].newTitle},on:{input:function(t){t.target.composing||e.$set(e.milestones[s],"newTitle",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),n("div",{staticClass:"text-right mt-3"},[n("button",{staticClass:"mr-3 btn btn-success",on:{click:function(t){t.preventDefault(),e.editMilestone(s)}}},[e._v("Edit Title")]),!0===e.milestones[s].mileOpened?n("button",{staticClass:"mr-3 btn btn-warning",on:{click:function(t){t.preventDefault(),e.closeMilestone(s)}}},[e._v("Close Milestone")]):n("button",{staticClass:"mr-3 btn btn-primary",on:{click:function(t){t.preventDefault(),e.reopenMilestone(s)}}},[e._v("Reopen Milestone")]),n("button",{staticClass:"mr-3 btn btn-danger",on:{click:function(t){t.preventDefault(),e.cancelEditing(s)}}},[e._v("Cancel")])])])]):e._e()])]),n("div",{staticClass:"mx-auto row"},[n("p",{staticClass:"mx-2"},[e._v(e._s(t.percentage)+"% complete")]),n("p",{staticClass:"mx-2"},[e._v(e._s(t.open)+" open")]),n("p",{staticClass:"mx-2"},[e._v(e._s(t.closed)+" closed")])]),n("div",{staticClass:"progress"},[n("div",{staticClass:"progress-bar bg-success",style:{width:t.percentage+"%"},attrs:{role:"progressbar","aria-valuemin":"0","aria-valuemax":"100"}})])]):e._e(),!0===t.mileOpened&&!0===e.showOpened?n("li",{staticClass:"py-5 text-left list-group-item"},[n("div",{staticClass:"row"},[n("h4",[e._v(e._s(t.title))]),n("div",{staticClass:"text-right mb-5 ml-auto mr-5"},[!1===e.milestones[s].titleEditing?n("button",{staticClass:"ml-auto btn btn-warning",on:{click:function(t){e.milestones[s].titleEditing=!0}}},[e._v("Edit Milestone")]):e._e(),!0===e.milestones[s].titleEditing?n("form",{staticClass:"ml-auto"},[n("div",{staticClass:"form-group text-left"},[n("label",{attrs:{for:"name"},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.editMilestone(s)}}},[e._v("New Milestone")]),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.milestones[s].newTitle,expression:"milestones[index].newTitle",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{placeholder:"New Milestone Name",id:"name"},domProps:{value:e.milestones[s].newTitle},on:{input:function(t){t.target.composing||e.$set(e.milestones[s],"newTitle",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),n("div",{staticClass:"text-right mt-3"},[n("button",{staticClass:"mr-3 btn btn-success",on:{click:function(t){t.preventDefault(),e.editMilestone(s)}}},[e._v("Edit Title")]),!0===e.milestones[s].mileOpened?n("button",{staticClass:"mr-3 btn btn-warning",on:{click:function(t){t.preventDefault(),e.closeMilestone(s)}}},[e._v("Close Milestone")]):n("button",{staticClass:"mr-3 btn btn-primary",on:{click:function(t){t.preventDefault(),e.reopenMilestone(s)}}},[e._v("Reopen Milestone")]),n("button",{staticClass:"mr-3 btn btn-danger",on:{click:function(t){t.preventDefault(),e.cancelEditing(s)}}},[e._v("Cancel")])])])]):e._e()])]),n("div",{staticClass:"mx-auto row"},[n("p",{staticClass:"mx-2"},[e._v(e._s(t.percentage)+"% complete")]),n("p",{staticClass:"mx-2"},[e._v(e._s(t.open)+" open")]),n("p",{staticClass:"mx-2"},[e._v(e._s(t.closed)+" closed")])]),n("div",{staticClass:"progress"},[n("div",{staticClass:"progress-bar bg-success",style:{width:t.percentage+"%"},attrs:{role:"progressbar","aria-valuemin":"0","aria-valuemax":"100"}})])]):e._e()])})],2)},i=[],l=(n("7514"),n("bf48")),o=n.n(l),a={name:"milestone",data:function(){return{milestones:[],showOpened:!0,mileTitle:"",mileOpened:0,mileClosed:0,orgId:"",orgName:"",proName:""}},computed:{proId:function(){return this.$route.params.proId}},created:function(){},mounted:function(){var e=this;e.showMile(),e.showRouteName()},methods:{showRouteName:function(){var e=this,t=o.a.Object.extend("Issue"),n=new o.a.Query(t);console.log(e.proId),n.equalTo("proId",e.proId),n.find().then(function(n){var s=new o.a.Query(t);console.log(n[0].id),s.get(n[0].id).then(function(t){e.orgName=t.get("orgName"),e.proName=t.get("proName")})})},showMile:function(){var e=this,t=[],n=o.a.Object.extend("Milestone"),s=new o.a.Query(n);s.equalTo("proId",e.proId),s.find().then(function(n){e.mileOpened=0,e.mileClosed=0;for(var s=function(s){var i=n[s];i.get("mileOpened")?e.mileOpened+=1:e.mileClosed+=1;var l=o.a.Object.extend("Issue"),a=new o.a.Query(l),r={},c=0;r.title=i.get("title"),a.equalTo("milestone",i.id),a.find().then(function(n){for(var s=0;s<n.length;s++)!1===n[s].get("issueOpened")&&(c+=1);var l=n.length,o=c;r.mileId=i.id,r.mileOpened=i.get("mileOpened"),r.all=l,r.closed=o,r.open=l-o,r.percentage=(o/l*100).toFixed(0),r.titleEditing=!1,r.newTitle="",t.push(r),e.milestones=t})},i=0;i<n.length;i++)s(i)})},editMilestone:function(e){var t=this,n=o.a.Object.extend("Milestone"),s=new o.a.Query(n);s.get(t.milestones[e].mileId).then(function(n){n.set("title",t.milestones[e].newTitle),n.save().then(function(){t.milestones[e].newTitle="",t.showMile()})})},closeMilestone:function(e){var t=this,n=o.a.Object.extend("Milestone"),s=new o.a.Query(n);s.get(t.milestones[e].mileId).then(function(e){e.set("mileOpened",!1),e.save().then(function(){t.showMile()})})},reopenMilestone:function(e){var t=this,n=o.a.Object.extend("Milestone"),s=new o.a.Query(n);s.get(t.milestones[e].mileId).then(function(e){e.set("mileOpened",!0),e.save().then(function(){t.showMile()})})},cancelEditing:function(e){var t=this;t.milestones[e].titleEditing=!1,t.milestones[e].newTitle=""}}},r=a,c=n("2877"),m=Object(c["a"])(r,s,i,!1,null,"3ae484b3",null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2d0e4bcf.4bdbba83.js.map