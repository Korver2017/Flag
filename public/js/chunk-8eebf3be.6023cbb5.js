(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8eebf3be"],{"065e":function(e,s,t){"use strict";var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-white"},[t("div",{staticClass:"dropdown"},[t("a",{staticClass:"btn dropdown-toggle",attrs:{href:"#",role:"button",id:"dropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t("img",{staticClass:"rounded",staticStyle:{width:"30px",height:"30px"},attrs:{src:"https://www.gravatar.com/avatar/"+e.user.avatarHash,alt:""}}),t("span",{staticClass:"mx-2"},[e._v(e._s(e.user.username))])]),t("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuLink"}},[t("li",{staticClass:"pb-2 d-flex align-items-center justify-content-center"},[e._v("切換控制面板用戶")]),t("hr",{staticClass:"mt-0"}),t("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[e._v(e._s(e.user.username))]),e._l(e.orgs,function(s){return t("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[e._v(e._s(s.name))])}),t("hr",{staticClass:"mb-0"}),t("router-link",{staticClass:"dropdown-item",attrs:{to:"/org/create",tag:"button","active-class":"active"}},[e._v("\n          新增組織\n        ")])],2)])])])},n=[],o={name:"sub-header",props:["user","orgs"]},r=o,i=t("2877"),u=Object(i["a"])(r,a,n,!1,null,"25eb242e",null);s["a"]=u.exports},"9f1c":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("sub-header",{attrs:{user:e.user,orgs:e.orgs}}),t("hr",{staticClass:"m-0"}),t("div",{staticClass:"row my-3",attrs:{id:"wrap"}},[t("div",{staticClass:"col-3"},[t("ul",{staticClass:"list-group list-group-flush"},[t("button",{staticClass:"d-flex justify-content-between text-left my-1 list-group-item border-0",on:{click:function(s){e.switchTo="myIssue",e.showOpened=!0}}},[e._v("屬於該用戶儲存庫的 "),t("span",[e._v(e._s(e.issueOpenedCount))])]),t("button",{staticClass:"d-flex justify-content-between text-left my-1 list-group-item border-0",on:{click:function(s){e.switchTo="assignToMe",e.showOpened=!0}}},[e._v("指派給您的 "),t("span",[e._v(e._s(e.assignToMeOpened))])]),t("button",{staticClass:"d-flex justify-content-between text-left my-1 list-group-item border-0",on:{click:function(s){e.switchTo="createdByMe",e.showOpened=!0}}},[e._v("由您建立的 "),t("span",[e._v(e._s(e.createdByMeOpened))])])]),t("hr"),e._l(e.openedIssueList,function(s){return t("ul",{staticClass:"list-group list-group-flush"},[t("button",{staticClass:"d-flex justify-content-between text-left my-1 list-group-item border-0"},[e._v("\n          "+e._s(s.orgName)+"/"+e._s(s.proName)+"\n        ")])])})],2),t("div",{staticClass:"col-9"},["myIssue"===e.switchTo?t("div",{staticClass:"row"},[t("state-counter",{attrs:{openedCount:e.issueOpenedCount,closedCount:e.issueClosedCount,showOpened:e.showOpened},on:{changeState:e.updateState}})],1):"assignToMe"===e.switchTo?t("div",{staticClass:"row"},[t("state-counter",{attrs:{openedCount:e.assignToMeOpened,closedCount:e.assignToMeClosed,showOpened:e.showOpened},on:{changeState:e.updateState}})],1):"createdByMe"===e.switchTo?t("div",{staticClass:"row"},[t("state-counter",{attrs:{openedCount:e.createdByMeOpened,closedCount:e.createdByMeClosed,showOpened:e.showOpened},on:{changeState:e.updateState}})],1):e._e(),e.issues.length>=1&&"myIssue"===e.switchTo?t("div",{staticClass:"mt-3 list-group list-group-flush "},[e._l(e.issues,function(s){return[!0===s.issueOpened&&!0===e.showOpened?t("div",{staticClass:"text-left list-group-item"},[t("div",{staticClass:"row my-3"},[t("span",{staticClass:"d-flex align-items-center rounded py-2 px-3 bg-light-theme mr-3"},[e._v(e._s(s.orgName)+"/"+e._s(s.proName))]),e.issues.length>0?t("router-link",{staticClass:"btn",attrs:{to:{name:"issue",params:{issueId:s.issueId,orgId:s.orgId,proId:s.proId}},tag:"button",type:"button"}},[t("h4",[e._v(e._s(s.issueName))])]):e._e()],1),t("div",[e._v("由 "+e._s(s.creator)+" 建立")])]):e._e(),!1===s.issueOpened&&!1===e.showOpened?t("div",{staticClass:"text-left list-group-item"},[t("div",{staticClass:"row my-3"},[t("span",{staticClass:"d-flex align-items-center rounded py-2 px-3 bg-light-theme mr-3"},[e._v(e._s(s.orgName)+"/"+e._s(s.proName))]),e.issues.length>0?t("router-link",{staticClass:"btn",attrs:{to:{name:"issue",params:{issueId:s.issueId,orgId:s.orgId,proId:s.proId}},tag:"button",type:"button"}},[t("h4",[e._v(e._s(s.issueName))])]):e._e()],1),t("div",[e._v("由 "+e._s(s.creator)+" 建立")])]):e._e()]})],2):e._e(),"assignToMe"===e.switchTo?t("div",{staticClass:"mt-3 list-group list-group-flush "},[e._l(e.assignToMeIssues,function(s){return[!0===s.issueOpened&&!0===e.showOpened?t("div",{staticClass:"text-left list-group-item"},[t("div",{staticClass:"row my-3"},[t("span",{staticClass:"d-flex align-items-center rounded py-2 px-3 bg-light-theme mr-3"},[e._v(e._s(s.orgName)+"/"+e._s(s.proName))]),e.issues.length>0?t("router-link",{staticClass:"btn",attrs:{to:{name:"issue",params:{issueId:s.issueId,orgId:s.orgId,proId:s.proId}},tag:"button",type:"button"}},[t("h4",[e._v(e._s(s.issueName))])]):e._e()],1),t("div",[e._v("由 "+e._s(s.creator)+" 建立")])]):e._e(),!1===s.issueOpened&&!1===e.showOpened?t("div",{staticClass:"text-left list-group-item"},[t("div",{staticClass:"row my-3"},[t("span",{staticClass:"d-flex align-items-center rounded py-2 px-3 bg-light-theme mr-3"},[e._v(e._s(s.orgName)+"/"+e._s(s.proName))]),e.issues.length>0?t("router-link",{staticClass:"btn",attrs:{to:{name:"issue",params:{issueId:s.issueId,orgId:s.orgId,proId:s.proId}},tag:"button",type:"button"}},[t("h4",[e._v(e._s(s.issueName))])]):e._e()],1),t("div",[e._v("由 "+e._s(s.creator)+" 建立")])]):e._e()]})],2):e._e(),"createdByMe"===e.switchTo?t("div",{staticClass:"mt-3 list-group list-group-flush "},[e._l(e.createdByMeIssues,function(s){return[!0===s.issueOpened&&!0===e.showOpened?t("div",{staticClass:"text-left list-group-item"},[t("div",{staticClass:"row my-3"},[t("span",{staticClass:"d-flex align-items-center rounded py-2 px-3 bg-light-theme mr-3"},[e._v(e._s(s.orgName)+"/"+e._s(s.proName))]),e.issues.length>0?t("router-link",{staticClass:"btn",attrs:{to:{name:"issue",params:{issueId:s.issueId,orgId:s.orgId,proId:s.proId}},tag:"button",type:"button"}},[t("h4",[e._v(e._s(s.issueName))])]):e._e()],1),t("div",[e._v("由 "+e._s(s.creator)+" 建立")])]):e._e(),!1===s.issueOpened&&!1===e.showOpened?t("div",{staticClass:"text-left list-group-item"},[t("div",{staticClass:"row my-3"},[t("span",{staticClass:"d-flex align-items-center rounded py-2 px-3 bg-light-theme mr-3"},[e._v(e._s(s.orgName)+"/"+e._s(s.proName))]),e.issues.length>0?t("router-link",{staticClass:"btn",attrs:{to:{name:"issue",params:{issueId:s.issueId,orgId:s.orgId,proId:s.proId}},tag:"button",type:"button"}},[t("h4",[e._v(e._s(s.issueName))])]):e._e()],1),t("div",[e._v("由 "+e._s(s.creator)+" 建立")])]):e._e()]})],2):e._e()])])],1)},n=[],o=(t("7514"),t("bf48")),r=t.n(o),i=t("065e"),u=t("d5cf"),d={name:"my-issue",components:{subHeader:i["a"],stateCounter:u["a"]},data:function(){return{orgs:"",issues:"",showOpened:!0,openedIssueList:"",switchTo:"myIssue",issueOpenedCount:0,issueClosedCount:0,assignToMeOpened:0,assignToMeClosed:0,createdByMeOpened:0,createdByMeClosed:0,assignToMeIssues:"",createdByMeIssues:""}},computed:{user:function(){return{authed:this.$store.state.user.authed,userId:this.$store.state.user.userId,avatarHash:this.$store.state.user.avatarHash,username:this.$store.state.user.username}}},mounted:function(){this.showOrg(),this.showMyIssue(),this.showCreatedByMe(),this.showAssigneToMe()},methods:{updateState:function(e){this.showOpened=e},showOrg:function(){var e=this,s=r.a.Object.extend("Organization"),t=new r.a.Query(s),a=[];t.equalTo("memberId",e.user.userId),t.find().then(function(t){for(var n=t.length,o=function(e){var n={},o=t[e],i=new r.a.Query(s);n.orgId=o.id,i.get(o.id).then(function(e){n.name=e.get("name"),a.push(n)})},i=0;i<n;i++)o(i);e.orgs=a})},showCreatedByMe:function(){var e=this,s=r.a.Object.extend("Issue"),t=new r.a.Query(s),a=[];t.equalTo("creator",e.user.username),t.find().then(function(s){for(var t=s.length,n=0,o=0;o<t;o++){var r={},i=s[o];r.issueId=i.id,r.orgId=i.get("orgId"),r.proId=i.get("proId"),r.proName=i.get("proName"),r.orgName=i.get("orgName"),r.issueName=i.get("name"),r.creator=i.get("creator"),r.issueOpened=i.get("issueOpened"),!0===r.issueOpened&&(n+=1),a.push(r)}e.createdByMeOpened=n,e.createdByMeClosed=t-n,e.createdByMeIssues=a})},showAssigneToMe:function(){var e=this,s=r.a.Object.extend("Issue"),t=new r.a.Query(s),a=[];t.equalTo("assigneeId",e.user.userId),t.find().then(function(s){for(var t=0,n=s.length,o=0;o<n;o++){var r={},i=s[o];r.issueId=i.id,r.orgId=i.get("orgId"),r.proId=i.get("proId"),r.proName=i.get("proName"),r.orgName=i.get("orgName"),r.issueName=i.get("name"),r.creator=i.get("creator"),r.issueOpened=i.get("issueOpened"),!0===r.issueOpened&&(t+=1),a.push(r)}e.assignToMeOpened=t,e.assignToMeClosed=n-t,e.assignToMeIssues=a})},showAssignee:function(){var e=this,s=r.a.Object.extend("Issue"),t=new r.a.Query(s);t.equalTo("assigneeId",e.user.userId),t.find().then(function(s){for(var t=0;t<s.length;t++){var a=s[t];!0===a.get("issueOpened")&&(e.assignToMe+=1)}})},showMyIssue:function(){var e=this,s=r.a.Object.extend("Issue"),t=new r.a.Query(s),a=[];t.notEqualTo("objectId",""),t.find().then(function(s){for(var t=0,n=s.length,o=0;o<n;o++){var r={},i=s[o];r.issueId=i.id,r.orgId=i.get("orgId"),r.proId=i.get("proId"),r.proName=i.get("proName"),r.orgName=i.get("orgName"),r.issueName=i.get("name"),r.creator=i.get("creator"),r.issueOpened=i.get("issueOpened"),!0===r.issueOpened&&(t+=1),a.push(r)}e.issueOpenedCount=t,e.issueClosedCount=n-t,e.issues=a})}},watch:{user:function(){}}},c=d,l=t("2877"),p=Object(l["a"])(c,a,n,!1,null,"1476a6d4",null);s["default"]=p.exports},d5cf:function(e,s,t){"use strict";var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"btn-group",attrs:{role:"group"}},[t("button",{staticClass:"btn btn-outline-secondary",class:{active:e.state},attrs:{type:"button"},on:{click:function(s){e.state=!0}}},[e._v("\n    "+e._s(e.openedCount)+" 個開啟中\n  ")]),t("button",{staticClass:"btn btn-outline-secondary",class:{active:!e.state},attrs:{type:"button"},on:{click:function(s){e.state=!1}}},[e._v("\n    "+e._s(e.closedCount)+" 個已關閉\n  ")])])},n=[],o={name:"state-counter",props:["openedCount","closedCount","showOpened"],data:function(){return{state:this.showOpened}},watch:{state:function(){this.$emit("changeState",this.state)}}},r=o,i=t("2877"),u=Object(i["a"])(r,a,n,!1,null,"1d7393cb",null);s["a"]=u.exports}}]);
//# sourceMappingURL=chunk-8eebf3be.6023cbb5.js.map