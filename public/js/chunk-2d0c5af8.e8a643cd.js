(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c5af8"],{"3fc2":function(e,a,t){"use strict";t.r(a);var l=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"my-5 container"},[t("h3",{staticClass:"my-5 text-left"},[t("router-link",{attrs:{to:{name:"organization"},tag:"a","active-class":"active"}},[t("a",[e._v(e._s(e.orgName))])]),e._v(" / \n    \n    "),t("router-link",{attrs:{to:{name:"project"},tag:"a","active-class":"active"}},[t("a",[e._v(e._s(e.proName))])])],1),!1===e.addingLabel?t("div",{staticClass:"text-right mr-5"},[t("button",{staticClass:"btn btn-success",on:{click:function(a){e.addingLabel=!0}}},[e._v("Add Label")])]):e._e(),!0===e.addingLabel?t("div",{staticClass:"d-flex justify-content-center row form-group text-left"},[t("div",{staticClass:"col-3"},[t("label",{attrs:{for:"labelName"}},[e._v("Label Name")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.labelName,expression:"labelName"}],staticClass:"form-control",attrs:{type:"text","aria-describedby":"button-addon2",id:"labelName"},domProps:{value:e.labelName},on:{input:function(a){a.target.composing||(e.labelName=a.target.value)}}})]),t("div",{staticClass:"col-5"},[t("label",{attrs:{for:"labelDesc"}},[e._v("Description")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.labelDesc,expression:"labelDesc"}],staticClass:"form-control",attrs:{type:"text","aria-describedby":"button-addon2",id:"labelDesc"},domProps:{value:e.labelDesc},on:{input:function(a){a.target.composing||(e.labelDesc=a.target.value)}}})]),t("div",{staticClass:"d-flex align-items-end"},[t("button",{staticClass:"mr-3 btn btn-success",on:{click:e.newLabel}},[e._v("Create Label")]),t("button",{staticClass:"mr-3 btn btn-danger",on:{click:e.cancelAddLabel}},[e._v("Cancel")])])]):e._e(),t("ul",{staticClass:"my-3 list-group list-group-flush text-left"},e._l(e.labels,function(a,l){return t("li",{staticClass:"py-3 list-group-item"},[!1===e.labels[l].editingLabel?t("div",{staticClass:"row"},[t("div",{staticClass:"col-4"},[e._v(e._s(a.title))]),t("div",{staticClass:"col-4"},[e._v(e._s(a.labelDesc))]),t("button",{staticClass:"ml-auto mr-3 btn btn-warning",on:{click:function(a){e.editingLabel(l)}}},[e._v("Edit")]),!1===e.labels[l].editingLabel?t("button",{staticClass:"mr-3 btn btn-danger",on:{click:function(a){e.deleteLabel(l)}}},[e._v("Delete")]):e._e()]):e._e(),!0===e.labels[l].editingLabel?t("div",{staticClass:"d-flex justify-content-center form-group text-left"},[t("div",{staticClass:"col-3"},[t("label",{attrs:{for:"labelName"}},[e._v("Label Name")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.labels[l].newLabelName,expression:"labels[index].newLabelName"}],staticClass:"form-control",attrs:{type:"text","aria-describedby":"button-addon2",id:"newLabelName"},domProps:{value:e.labels[l].newLabelName},on:{input:function(a){a.target.composing||e.$set(e.labels[l],"newLabelName",a.target.value)}}})]),t("div",{staticClass:"col-5"},[t("label",{attrs:{for:"labelDesc"}},[e._v("Description")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.labels[l].newLabelDesc,expression:"labels[index].newLabelDesc"}],staticClass:"form-control",attrs:{type:"text","aria-describedby":"button-addon2",id:"newLabelDesc"},domProps:{value:e.labels[l].newLabelDesc},on:{input:function(a){a.target.composing||e.$set(e.labels[l],"newLabelDesc",a.target.value)}}})]),t("div",{staticClass:"d-flex align-items-end"},[t("button",{staticClass:"mr-3 btn btn-success",on:{click:function(a){e.updateLabel(l)}}},[e._v("Save Changes")]),t("button",{staticClass:"mr-3 btn btn-danger",on:{click:function(a){e.cancelUpdateLabel(l)}}},[e._v("Cancel")])])]):e._e()])}),0)])},n=[],s=(t("7514"),t("bf48")),i=t.n(s),c={data:function(){return{orgName:"",proName:"",labels:[],addingLabel:!1,labelName:"",labelDesc:"",newLabelName:"",newLabelDesc:""}},computed:{proId:function(){return this.$route.params.proId}},mounted:function(){var e=this;e.showRouteName(),e.showLabel()},methods:{showRouteName:function(){var e=this,a=i.a.Object.extend("Project"),t=new i.a.Query(a);t.get(e.proId).then(function(a){e.orgName=a.get("orgName"),e.proName=a.get("name")},function(e){})},showLabel:function(){var e=this,a=i.a.Object.extend("Label"),t=new i.a.Query(a),l=[];t.equalTo("proId",e.proId),t.find().then(function(e){for(var a=0;a<e.length;a++){var t={},n=e[a];t.labelId=n.id,t.title=n.get("title"),t.labelDesc=n.get("labelDesc"),t.editingLabel=!1,t.newLabelName="",t.newLabelDesc="",l.push(t)}}),e.labels=l},newLabel:function(){var e=this,a=i.a.Object.extend("Label"),t=new a;t.set("title",e.labelName),t.set("labelDesc",e.labelDesc),t.set("proId",e.proId),t.save().then(function(a){e.showLabel(),e.cancelAddLabel()},function(e){alert("Failed to create new object, with error code: "+e.message)})},cancelAddLabel:function(){var e=this;e.labelName="",e.labelDesc="",e.addingLabel=!1},editingLabel:function(e){var a=this,t=a.labels[e];t.editingLabel=!0,t.newLabelName=t.title,t.newLabelDesc=t.labelDesc},updateLabel:function(e){var a=this,t=a.labels[e].labelId,l=i.a.Object.extend("Label"),n=new i.a.Query(l);n.get(t).then(function(t){t.set("title",a.labels[e].newLabelName),t.set("labelDesc",a.labels[e].newLabelDesc),t.save().then(function(e){a.showLabel()})},function(e){})},cancelUpdateLabel:function(e){var a=this;a.newLabelName="",a.newLabelDesc="",a.labels[e].editingLabel=!1},deleteLabel:function(e){var a=this,t=a.labels[e].labelId,l=i.a.Object.extend("Label"),n=new i.a.Query(l);n.get(t).then(function(e){confirm("確定要刪除這個 Label 嗎？")&&e.destroy().then(function(e){a.showLabel()},function(e){})})}}},o=c,b=t("2877"),r=Object(b["a"])(o,l,n,!1,null,"6e99a70c",null);a["default"]=r.exports}}]);
//# sourceMappingURL=chunk-2d0c5af8.e8a643cd.js.map