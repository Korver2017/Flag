(function(e){function t(t){for(var a,r,s=t[0],i=t[1],c=t[2],d=0,l=[];d<s.length;d++)r=s[d],o[r]&&l.push(o[r][0]),o[r]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);h&&h(t);while(l.length)l.shift()();return u.push.apply(u,c||[]),n()}function n(){for(var e,t=0;t<u.length;t++){for(var n=u[t],a=!0,r=1;r<n.length;r++){var s=n[r];0!==o[s]&&(a=!1)}a&&(u.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={app:0},o={app:0},u=[];function s(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-09295a97":"ab38dce5","chunk-0c788fd4":"632ecb42","chunk-14fc1d45":"fc681918","chunk-2d216ed9":"58c9cbe3","chunk-2d21aabe":"2afe3e32","chunk-337f0ba9":"3fbfc028","chunk-3fff1551":"222de6a5","chunk-5e9cebe9":"14cb2864","chunk-66cf339a":"49050bf3","chunk-6d5490bf":"1f5c512a","chunk-6dc704f0":"7b60a249","chunk-2d22a127":"8375c18d","chunk-2d231033":"10c44d8e","chunk-77f1750d":"cc76466a","chunk-8eebf3be":"6023cbb5"}[e]+".js"}function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-5e9cebe9":1,"chunk-66cf339a":1,"chunk-6dc704f0":1,"chunk-77f1750d":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise(function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-09295a97":"31d6cfe0","chunk-0c788fd4":"31d6cfe0","chunk-14fc1d45":"31d6cfe0","chunk-2d216ed9":"31d6cfe0","chunk-2d21aabe":"31d6cfe0","chunk-337f0ba9":"31d6cfe0","chunk-3fff1551":"31d6cfe0","chunk-5e9cebe9":"d20fd570","chunk-66cf339a":"413e0dee","chunk-6d5490bf":"31d6cfe0","chunk-6dc704f0":"625d89ca","chunk-2d22a127":"31d6cfe0","chunk-2d231033":"31d6cfe0","chunk-77f1750d":"df193555","chunk-8eebf3be":"31d6cfe0"}[e]+".css",o=i.p+a,u=document.getElementsByTagName("link"),s=0;s<u.length;s++){var c=u[s],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===a||d===o))return t()}var l=document.getElementsByTagName("style");for(s=0;s<l.length;s++){c=l[s],d=c.getAttribute("data-href");if(d===a||d===o)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var a=t&&t.target&&t.target.src||o,u=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");u.request=a,delete r[e],h.parentNode.removeChild(h),n(u)},h.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(h)}).then(function(){r[e]=0}));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var u=new Promise(function(t,n){a=o[e]=[t,n]});t.push(a[2]=u);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,i.nc&&d.setAttribute("nonce",i.nc),d.src=s(e),c=function(t){d.onerror=d.onload=null,clearTimeout(l);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,u=new Error("Loading chunk "+e+" failed.\n("+a+": "+r+")");u.type=a,u.request=r,n[1](u)}o[e]=void 0}};var l=setTimeout(function(){c({type:"timeout",target:d})},12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(t)},i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var h=d;u.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-white"},[!0===e.user.authed?n("router-link",{staticClass:"navbar-brand nav-item nav-link",attrs:{to:"/dashboard"}},[n("a",[e._v("Flag")])]):e._e(),!0===e.user.authed?n("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarNavAltMarkup"}},[n("div",{staticClass:"navbar-nav"},[n("router-link",{staticClass:"mx-2 rounded nav-item nav-link",attrs:{to:"/dashboard",tag:"a","active-class":"active",exact:""}},[e._v("\n          控制面板\n        ")]),n("router-link",{staticClass:"mx-2 rounded nav-item nav-link",attrs:{to:"/issues",tag:"a","active-class":"active"}},[e._v("\n          問題\n        ")])],1),n("div",{staticClass:"d-flex align-items-center navbar-nav ml-auto mr-3"},[n("div",{staticClass:"dropdown"},[n("a",{staticClass:"btn dropdown-toggle",attrs:{href:"#",role:"button",id:"dropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e._v("\n            建立\n          ")]),n("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuLink"}},[n("router-link",{staticClass:"dropdown-item",attrs:{to:"/project/create",tag:"a","active-class":"active"}},[n("a",[e._v("新增儲存庫")])]),n("router-link",{staticClass:"dropdown-item",attrs:{to:"/org/create",tag:"a","active-class":"active"}},[n("a",[e._v("新增組織")])])],1)]),n("div",{staticClass:"dropdown"},[n("a",{staticClass:"border-0 btn dropdown-toggle",attrs:{href:"#",role:"button",id:"dropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[n("img",{staticClass:"rounded",staticStyle:{width:"25px",height:"25px"},attrs:{src:"https://www.gravatar.com/avatar/"+e.user.avatarHash,alt:""}})]),n("div",{staticClass:"dropdown-menu dropdown-menu-right",attrs:{"aria-labelledby":"dropdownMenuLink"}},[n("li",{staticClass:"pb-2 d-flex align-items-center justify-content-center"},[e._v("已登入用戶 "+e._s(e.user.username))]),n("hr",{staticClass:"my-0"}),n("hr",{staticClass:"my-0"}),n("button",{staticClass:"pt-2 dropdown-item",on:{click:e.logOut}},[e._v("登出")])])])])]):e._e(),!1===e.user.authed?n("router-link",{staticClass:"btn px-4 ml-auto mr-3 navbar-brand nav-item nav-link",attrs:{to:"/signin","active-class":"active"}},[n("a",[e._v("登入")])]):e._e()],1),n("hr",{staticClass:"my-0"}),n("router-view")],1)},o=[],u=n("bf48"),s=n.n(u),i=n("8c4f");a["a"].use(i["a"]);var c=new i["a"]({mode:"history",base:"/",routes:[{path:"/signin",name:"signin",component:function(){return n.e("chunk-3fff1551").then(n.bind(null,"ac9e"))}},{path:"/dashboard",name:"dashboard",component:function(){return n.e("chunk-0c788fd4").then(n.bind(null,"4601"))}},{path:"/issues",name:"my-issue",component:function(){return n.e("chunk-8eebf3be").then(n.bind(null,"9f1c"))}},{path:"/project/create",name:"add-project",component:function(){return n.e("chunk-2d216ed9").then(n.bind(null,"c50a"))}},{path:"/org/create",name:"add-organization",component:function(){return n.e("chunk-2d21aabe").then(n.bind(null,"bd06"))}},{path:"/:orgId",name:"organization",component:function(){return n.e("chunk-6d5490bf").then(n.bind(null,"4f10"))}},{path:"/:orgId/:proId",name:"project",component:function(){return n.e("chunk-77f1750d").then(n.bind(null,"616c"))}},{path:"/:orgId/:proId/issues/new",name:"add-issue",component:function(){return n.e("chunk-5e9cebe9").then(n.bind(null,"715c"))}},{path:"/:orgId/:proId/issues/:issueId",name:"issue",component:function(){return n.e("chunk-14fc1d45").then(n.bind(null,"f1bb"))}},{path:"/:orgId/:proId/milestone",name:"milestone",component:function(){return n.e("chunk-337f0ba9").then(n.bind(null,"9200"))}},{path:"/:orgId/:proId/milestone/:mileId",name:"milestone-detail",component:function(){return n.e("chunk-66cf339a").then(n.bind(null,"bc84"))}},{path:"/:orgId/:proId/milestone/new",name:"new-milestone",component:function(){return Promise.all([n.e("chunk-6dc704f0"),n.e("chunk-2d22a127")]).then(n.bind(null,"dfc2"))}},{path:"/:orgId/:proId/milestone/:mileId/edit",name:"edit-milestone",component:function(){return Promise.all([n.e("chunk-6dc704f0"),n.e("chunk-2d231033")]).then(n.bind(null,"ef73"))}},{path:"/:orgId/:proId/label-list",name:"label-list",component:function(){return n.e("chunk-09295a97").then(n.bind(null,"3fc2"))}}]}),d={name:"Home",components:{},data:function(){return{token:""}},created:function(){var e=this;e.token=e.$cookie.get("token"),void 0!==e.token?e.$store.dispatch("user/autoSignin",e.token):e.$router.push("/signin")},computed:{user:function(){return{authed:this.$store.state.user.authed,userId:this.$store.state.user.userId,username:this.$store.state.user.username,avatarHash:this.$store.state.user.avatarHash}}},mounted:function(){},methods:{logOut:function(){var e=this;e.$cookie.remove("token"),e.$store.dispatch("user/logOut")}},watch:{}},l=d,h=(n("6294"),n("6900"),n("2877")),f=Object(h["a"])(l,r,o,!1,null,"31e706d6",null),p=f.exports,m=(n("4989"),n("ab8b"),n("2f62")),v=n("f499"),b=n.n(v),g=(n("7514"),n("81fa")),k=n.n(g),w=n("a78e"),y=n.n(w),I={namespaced:!0,state:{authed:!1,username:"",userId:"",avatarHash:"",input:{email:"",password:""}},mutations:{authed:function(e,t){!0===e.authed?(e.authed=!1,e.username="",e.userId="",e.avatarHash="",e.input.email="",e.input.password="",c.push("/signin")):(e.authed=t.authed,e.username=t.username,e.userId=t.userId,e.avatarHash=t.avatarHash)},input:function(e,t){e.input.email=t.email||e.input.email||"",e.input.password=t.password||e.input.password||""}},actions:{signin:function(e){var t=e.state,n=e.commit,a=s.a.Object.extend("Account"),r=new s.a.Query(a);r.equalTo("email",t.input.email),r.find().then(function(e){e.length<1?alert("Email 錯誤"):(r.equalTo("password",t.input.password),r.find().then(function(e){if(e.length<1)alert("密碼錯誤");else{var t={alg:"HS256",typ:"JWT"},r={},o=k.a.jws.IntDate.get("now"),u=k.a.jws.IntDate.get("now + 1day"),i=e[0].id;r.nbf=o,r.iat=o,r.exp=u;var d=b()(t),l=b()(r),h=new s.a.Query(a);h.get(i).then(function(e){var t=e.get("secret"),a=k.a.jws.JWS.sign("HS256",d,l,t);e.set("token",a),e.save(),y.a.set("token",a);var r={};r.username=e.get("username"),r.authed=!0,r.userId=i,r.avatarHash=e.get("avatarHash"),n("authed",r),c.push("/dashboard")})}}))})},autoSignin:function(e,t){var n=e.commit,a=s.a.Object.extend("Account"),r=new s.a.Query(a);r.equalTo("token",t),r.find().then(function(e){for(var t=0;t<e.length;t++){var a=e[t],r={};r.username=a.get("username"),r.authed=!0,r.userId=a.id,r.avatarHash=a.get("avatarHash"),n("authed",r)}})},logOut:function(e){var t=e.commit;t("authed"),c.push("/signin")}}};a["a"].use(m["a"]);var C=new m["a"].Store({modules:{user:I}}),x=n("9ce6"),j=n.n(x),_=n("1881"),O=n.n(_);n("7f10");s.a.initialize("Ox33tQSpiscXrVvf4HKXsduw2ProZNCysXXGY5zT"),s.a.serverURL="https://parse.protype.tw/parse",a["a"].config.productionTip=!1,a["a"].prototype.$j=k.a,a["a"].prototype.$cookie=y.a,a["a"].use(j.a),a["a"].use(O.a),new a["a"]({router:c,store:C,render:function(e){return e(p)}}).$mount("#app")},6294:function(e,t,n){"use strict";var a=n("7fba"),r=n.n(a);r.a},6900:function(e,t,n){"use strict";var a=n("b91c"),r=n.n(a);r.a},"7fba":function(e,t,n){},b91c:function(e,t,n){}});
//# sourceMappingURL=app.3e448393.js.map