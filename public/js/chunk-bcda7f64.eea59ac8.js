(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bcda7f64","chunk-e19c91b0"],{"1d6c":function(t,e,a){},"616c":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-3",attrs:{id:"wrap"}},[a("div",{staticClass:"row my-4"},[a("div",{staticClass:"mb-0 d-flex align-items-center"},[a("h4",{staticClass:"text-left"},[a("router-link",{attrs:{to:{name:"organization"},tag:"a","active-class":"active"}},[a("a",[t._v(t._s(t.orgName))])]),t._v("\n        / "),a("router-link",{attrs:{to:{name:"project"},tag:"a","active-class":"active"}},[a("a",[t._v(t._s(t.proName))])])],1)]),t._m(0)]),a("ul",{staticClass:"nav nav-tabs"},[t._m(1),a("router-link",{staticClass:"nav-item",attrs:{to:{name:"project"},tag:"li","active-class":"active"}},[a("a",{staticClass:"nav-link active"},[t._v("問題 "),a("span",{staticClass:"ml-2 badge badge-secondary"},[t._v(t._s(t.issues.length))])])]),t._m(2),t._m(3),t._m(4),t._m(5),t._m(6)],1),a("div",{staticClass:"row my-4 d-flex justify-content-between"},[a("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Basic example"}},[a("router-link",{staticClass:"btn btn-outline-secondary",attrs:{to:{name:"label-list",params:{proId:t.proId,issues:t.issues}},tag:"button","active-class":"active"}},[t._v("\n        標籤\n      ")]),a("router-link",{staticClass:"btn btn-outline-secondary",attrs:{to:{name:"milestone",params:{proId:t.proId}},tag:"button","active-class":"active"}},[t._v("\n        里程碑\n      ")])],1),t._m(7),a("div",[a("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"add-issue"},tag:"button","active-class":"active"}},[t._v("\n        建立問題\n      ")])],1)]),a("hr"),a("div",{staticClass:"row"},[a("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Basic example"}},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(e){t.showOpened=!0}}},[t._v("\n        "+t._s(t.opened.length)+" 個開啟中\n      ")]),a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(e){t.showOpened=!1}}},[t._v("\n        "+t._s(t.closed.length)+" 個已關閉\n      ")])]),0===t.checked.length?a("div",{staticClass:"row ml-auto"},[t._m(8),t._m(9),t._m(10),t._m(11),t._m(12)]):a("div",{staticClass:"row ml-auto"},[a("div",{staticClass:"dropdown mx-3"},[a("button",{staticClass:"btn btn-outline-danger",on:{click:t.closeIssue}},[t._v("\n          關閉\n        ")])]),a("div",{staticClass:"dropdown mx-3"},[a("button",{staticClass:"btn btn-outline-white dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n          標籤\n        ")]),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},t._l(t.labels,function(e){return a("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(a){t.addLabelTo(e.labelId)}}},[t._v(t._s(e.title))])}),0)]),a("div",{staticClass:"dropdown mx-3"},[a("button",{staticClass:"btn btn-outline-white dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n          里程碑\n        ")]),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},t._l(t.milestones,function(e){return a("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(a){t.addIssueTo(e.mileId,e.title)}}},[t._v(t._s(e.title))])}),0)]),a("div",{staticClass:"dropdown mx-3"},[a("button",{staticClass:"btn btn-outline-white dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n          負責人\n        ")]),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},t._l(t.users,function(e){return a("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(a){t.assignTo(e.assigneeId,e.avatarHash)}}},[t._v(t._s(e.name))])}),0)])])]),t.issues.length>=1?a("div",{staticClass:"mt-3 list-group list-group-flush"},[t._l(t.issues,function(e){return[!0===e.issueOpened&&!0===t.showOpened?a("router-link",{staticClass:"list-group-item",attrs:{to:{name:"issue",params:{issueId:e.issueId}},tag:"li",type:"li","active-class":"active"}},[a("div",{staticClass:"row d-flex align-items-center"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"checked"}],staticClass:"mr-3",attrs:{type:"checkbox"},domProps:{value:e.issueId,checked:Array.isArray(t.checked)?t._i(t.checked,e.issueId)>-1:t.checked},on:{change:function(a){var s=t.checked,n=a.target,i=!!n.checked;if(Array.isArray(s)){var r=e.issueId,o=t._i(s,r);n.checked?o<0&&(t.checked=s.concat([r])):o>-1&&(t.checked=s.slice(0,o).concat(s.slice(o+1)))}else t.checked=i}}}),a("span",{staticClass:"px-3 py-2 badge badge-primary"},[t._v("#1")]),a("a",{staticClass:"ml-3 text-decoration-none",staticStyle:{"font-size":"20px"}},[t._v(t._s(e.name))]),t._l(e.labels,function(e){return a("span",{staticClass:"px-3 py-2 ml-3 badge badge-primary"},[t._v(t._s(e))])}),""!==e.mileTitle?a("span",[a("i",{staticClass:"ml-3 fa fa-map-signs",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(e.mileTitle)+"\n          ")]):t._e()],2),a("div",{staticClass:"row d-flex align-items-center"},[a("div",[t._v("由 Korver 建立")]),a("div",{staticClass:"ml-auto"},t._l(e.avatarHash,function(s){return e.avatarHash.length>0?a("img",{staticClass:"mr-3 rounded",staticStyle:{width:"30px"},attrs:{src:"https://www.gravatar.com/avatar/"+s,alt:""}}):t._e()}),0)])]):!1===e.issueOpened&&!1===t.showOpened?a("router-link",{staticClass:"list-group-item",attrs:{to:{name:"issue",params:{issueId:e.issueId}},tag:"li",type:"li","active-class":"active"}},[a("div",{staticClass:"row d-flex align-items-center"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"checked"}],staticClass:"mr-3",attrs:{type:"checkbox"},domProps:{value:e.issueId,checked:Array.isArray(t.checked)?t._i(t.checked,e.issueId)>-1:t.checked},on:{change:function(a){var s=t.checked,n=a.target,i=!!n.checked;if(Array.isArray(s)){var r=e.issueId,o=t._i(s,r);n.checked?o<0&&(t.checked=s.concat([r])):o>-1&&(t.checked=s.slice(0,o).concat(s.slice(o+1)))}else t.checked=i}}}),a("span",{staticClass:"px-3 py-2 badge badge-primary"},[t._v("#1")]),a("a",{staticClass:"ml-3 text-decoration-none",staticStyle:{"font-size":"20px"}},[t._v(t._s(e.name))]),t._l(e.labels,function(e){return a("span",{staticClass:"px-3 py-2 ml-3 badge badge-primary"},[t._v(t._s(e))])}),""!==e.mileTitle?a("span",[a("i",{staticClass:"ml-3 fa fa-map-signs",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(e.mileTitle)+"\n          ")]):t._e()],2),a("div",{staticClass:"row d-flex align-items-center"},[a("div",[t._v("由 Korver 建立")]),a("div",{staticClass:"ml-auto"},t._l(e.avatarHash,function(s){return e.avatarHash.length>0?a("img",{staticClass:"mr-3 rounded",staticStyle:{width:"30px"},attrs:{src:"https://www.gravatar.com/avatar/"+s,alt:""}}):t._e()}),0)])]):t._e()]})],2):t._e(),t._m(13)])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ml-auto"},[a("div",{staticClass:"pr-3 btn-group btn-group-toggle",attrs:{"data-toggle":"buttons"}},[a("label",{staticClass:"border border-dark btn"},[a("input",{attrs:{type:"radio",name:"options",id:"option1",autocomplete:"off",checked:""}}),t._v(" 取消關注\n        ")]),a("label",{staticClass:"border border-dark btn"},[a("input",{attrs:{type:"radio",name:"options",id:"option2",autocomplete:"off"}}),t._v(" 8\n        ")])]),a("div",{staticClass:"pr-3 btn-group btn-group-toggle",attrs:{"data-toggle":"buttons"}},[a("label",{staticClass:"border border-dark btn"},[a("input",{attrs:{type:"radio",name:"options",id:"option1",autocomplete:"off",checked:""}}),t._v(" 收藏\n        ")]),a("label",{staticClass:"border border-dark btn"},[a("input",{attrs:{type:"radio",name:"options",id:"option2",autocomplete:"off"}}),t._v(" 0\n        ")])]),a("div",{staticClass:"pr-3 btn-group btn-group-toggle",attrs:{"data-toggle":"buttons"}},[a("label",{staticClass:"border border-dark btn"},[a("input",{attrs:{type:"radio",name:"options",id:"option1",autocomplete:"off",checked:""}}),t._v(" 複製\n        ")]),a("label",{staticClass:"border border-dark btn"},[a("input",{attrs:{type:"radio",name:"options",id:"option2",autocomplete:"off"}}),t._v(" 0\n        ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("程式碼")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("合併請求"),a("span",{staticClass:"ml-2 badge badge-secondary"},[t._v("0")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("版本發佈"),a("span",{staticClass:"ml-2 badge badge-secondary"},[t._v("0")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("Wiki")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("活動")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"ml-auto nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("儲存庫設定")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"input-group"},[a("input",{staticClass:"form-control p-2",attrs:{type:"text",placeholder:"搜尋...","aria-label":"搜尋...","aria-describedby":"button-addon2"}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button",id:"button-addon2"}},[t._v("搜尋")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dropdown mx-3"},[a("button",{staticClass:"btn btn-outline-white dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n          標籤篩選\n        ")]),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},[a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Action")]),a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Another action")]),a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Something else here")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dropdown mx-3"},[a("button",{staticClass:"btn btn-outline-white dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n          里程碑篩選\n        ")]),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},[a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Action")]),a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Another action")]),a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Something else here")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dropdown mx-3"},[a("button",{staticClass:"btn btn-outline-white dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n          指派人篩選\n        ")]),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},[a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Action")]),a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Another action")]),a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Something else here")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dropdown mx-3"},[a("button",{staticClass:"btn btn-outline-white dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n          類型篩選\n        ")]),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},[a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Action")]),a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Another action")]),a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Something else here")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dropdown mx-3"},[a("button",{staticClass:"btn btn-outline-white dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n          順序\n        ")]),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},[a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Action")]),a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Another action")]),a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Something else here")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"my-3 d-flex justify-content-center"},[a("ul",{staticClass:"pagination"},[a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",attrs:{href:"#",tabindex:"-1","aria-disabled":"true"}},[t._v("上一頁")])]),a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("1")])]),a("li",{staticClass:"page-item active",attrs:{"aria-current":"page"}},[a("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("2 "),a("span",{staticClass:"sr-only"},[t._v("(current)")])])]),a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("3")])]),a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("下一頁")])])])])}],i=(a("7514"),a("bf48")),r=a.n(i),o=a("715c"),c={name:"project",components:{AddIssue:o["default"]},data:function(){return{proName:"",issues:[],issueAdding:!1,title:"",content:"",username:this.$store.state.user.username,labels:[],checked:[],opened:[],closed:[],showOpened:!0,milestones:[],users:[],orgName:"",orgId:"",mileTitle:""}},computed:{proId:function(){return this.$route.params.proId},userId:function(){return this.$store.state.user.input.userId},checking:function(){var t=this;if(0===t.checked.length)return!1}},created:function(){},mounted:function(){var t=this;t.showUser(),t.showProName(),t.showIssue(),t.showLabel(),t.showMilestone()},methods:{showUser:function(){var t=this,e=r.a.Object.extend("Project"),a=new r.a.Query(e),s=[];a.get(t.proId).then(function(e){var a=e.get("orgId"),n=r.a.Object.extend("Organization"),i=new r.a.Query(n);t.orgId=a,i.get(a).then(function(t){for(var e=t.get("memberId"),a=function(t){var a={},n=e[t],i=r.a.Object.extend("Account"),o=new r.a.Query(i);o.get(n).then(function(t){a.name=t.get("username"),a.assigneeId=n,a.avatarHash=t.get("avatarHash"),a.email=t.get("email"),s.push(a)})},n=0;n<e.length;n++)a(n)}),t.users=s},function(t){})},showProName:function(){var t=this,e=t.$route.params.proId,a=r.a.Object.extend("Project"),s=new r.a.Query(a);s.get(e).then(function(e){t.proName=e.get("name"),t.orgName=e.get("orgName")})},showIssue:function(){var t=this,e=r.a.Object.extend("Issue"),a=new r.a.Query(e);a.equalTo("proId",t.proId);var s=[],n=[],i=[];a.find().then(function(t){for(var e=function(e){var a={},o=t[e];a.name=o.get("name"),a.issueId=o.id,a.creator=o.get("creator"),a.issueOpened=o.get("issueOpened"),a.avatarHash=o.get("avatarHash"),a.assigneeId=o.get("assigneeId"),a.mileTitle=o.get("mileTitle");var c=[],l=r.a.Object.extend("Label"),d=new r.a.Query(l);d.equalTo("issueId",o.id),d.find().then(function(t){for(var e=0;e<t.length;e++){var a=t[e];c.push(a.get("title"))}}),a.labels=c,s.push(a),!0===a.issueOpened?n.push(a):!1===a.issueOpened&&i.push(a)},a=0;a<t.length;a++)e(a)}),t.issues=s,t.opened=n,t.closed=i},showLabel:function(){var t=this,e=r.a.Object.extend("Label"),a=new r.a.Query(e),s=[];a.equalTo("proId",t.proId),a.find().then(function(t){for(var e=0;e<t.length;e++){var a={},n=t[e];a.labelId=n.id,a.title=n.get("title"),a.labelDesc=n.get("labelDesc"),a.issueId=n.get("issueId"),s.push(a)}},function(t){}),t.labels=s},addIssue:function(){this.issueAdding=!0},submitIssue:function(){var t=this,e=r.a.Object.extend("Issue"),a=new e;new r.a.Query(e);a.set("name",t.title),a.set("content",t.content),a.set("creator",t.$store.state.user.username),a.set("creatorId",t.$store.state.user.input.userId),a.set("issueOpened",!0),a.set("milestone",""),a.set("mileTitle",""),a.set("avatarHash",[]),a.set("orgId",t.orgId),a.set("proId",t.proId),a.set("orgName",t.orgName),a.set("proName",t.proName),a.save().then(function(e){t.title="",t.content="",t.showIssue(),t.issueAdding=!1},function(t){alert("Failed to create new object, with error code: "+t.message)})},cancel:function(){this.issueAdding=!1,this.title="",this.content=""},closeIssue:function(){for(var t=this,e=r.a.Object.extend("Issue"),a=0;a<t.checked.length;a++){var s=new r.a.Query(e);s.get(t.checked[a]).then(function(e){e.set("issueOpened",!1),e.save().then(function(){t.showIssue()})},function(t){})}t.checked=[]},reopenIssue:function(){for(var t=this,e=r.a.Object.extend("Issue"),a=0;a<t.checked.length;a++){var s=new r.a.Query(e);s.get(t.checked[a]).then(function(e){e.set("issueOpened",!0),e.save().then(function(){return t.showIssue()})},function(t){})}t.checked=[]},showMilestone:function(){var t=this,e=r.a.Object.extend("Milestone"),a=new r.a.Query(e),s=[];a.equalTo("proId",t.proId),a.find().then(function(t){for(var e=0;e<t.length;e++){var a={},n=t[e];a.mileId=n.id,a.title=n.get("title"),s.push(a)}}),t.milestones=s},addLabelTo:function(t){var e=this,a=r.a.Object.extend("Label"),s=new r.a.Query(a);s.get(t).then(function(t){for(var a=0;a<e.checked.length;a++){var s=e.checked[a];t.addUnique("issueId",s)}t.save().then(function(t){e.showIssue()})},function(t){})},addIssueTo:function(t,e){console.log(t,e);for(var a=this,s=r.a.Object.extend("Issue"),n=0;n<a.checked.length;n++){var i=new r.a.Query(s);i.get(a.checked[n]).then(function(s){s.set("milestone",t),s.set("mileTitle",e),s.save().then(function(t){a.showIssue(),a.checked=[]});var n=r.a.Object.extend("Milestone"),i=new r.a.Query(n);i.get(t).then(function(t){return t.set("proId",a.proId),t.save()},function(t){})},function(t){})}},assignTo:function(t,e){var a=this,s=r.a.Object.extend("Issue"),n=new r.a.Query(s);n.containedIn("objectId",a.checked),n.find().then(function(n){for(var i=0;i<n.length;i++){var o=n[i],c=new r.a.Query(s);c.get(o.id).then(function(s){s.addUnique("avatarHash",e),s.addUnique("assigneeId",t),s.save().then(function(){a.showIssue(),a.checked=[]})})}})}},watch:{}},l=c,d=(a("be134"),a("2877")),u=Object(d["a"])(l,s,n,!1,null,"ca66dffc",null);e["default"]=u.exports},"715c":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-3",attrs:{id:"wrap"}},[a("div",{staticClass:"row my-4"},[a("div",{staticClass:"mb-0 d-flex align-items-center"},[a("h4",{staticClass:"text-left"},[a("router-link",{attrs:{to:{name:"organization"},tag:"a","active-class":"active"}},[a("a",[t._v(t._s(t.orgName))])]),t._v("\n        / "),a("router-link",{attrs:{to:{name:"project"},tag:"a","active-class":"active"}},[a("a",[t._v(t._s(t.proName))])])],1)]),t._m(0)]),a("ul",{staticClass:"nav nav-tabs"},[t._m(1),a("router-link",{staticClass:"nav-item",attrs:{to:{name:"project"},tag:"li","active-class":"active"}},[a("a",{staticClass:"nav-link active"},[t._v("問題 "),a("span",{staticClass:"ml-2 badge badge-secondary"},[t._v(t._s(t.issues.length))])])]),t._m(2),t._m(3),t._m(4),t._m(5),t._m(6)],1),a("div",{staticClass:"row my-4 d-flex justify-content-between"},[a("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Basic example"}},[a("router-link",{staticClass:"btn btn-outline-secondary",attrs:{to:{name:"label-list",params:{proId:t.proId,issues:t.issues}},tag:"button","active-class":"active"}},[t._v("\n        標籤\n      ")]),a("router-link",{staticClass:"btn btn-outline-secondary",attrs:{to:{name:"milestone",params:{proId:t.proId}},tag:"button","active-class":"active"}},[t._v("\n        里程碑\n      ")])],1)]),a("hr"),a("div",{staticClass:"row"},[a("div",{staticClass:"col-9"},[a("div",{staticClass:"row"},[t.avatarHash.length>0?a("img",{staticClass:"rounded",staticStyle:{width:"50px",height:"50px"},attrs:{src:"https://www.gravatar.com/avatar/"+t.avatarHash,alt:""}}):t._e(),a("form",{staticClass:"rounded ml-3 col-11",staticStyle:{border:"1px solid rgba(34,36,38,.15)"}},[a("div",{staticClass:"form-group text-left"},[a("label",{attrs:{for:"title"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitIssue(e)}}}),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.title,expression:"title",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{placeholder:"標題",id:"title"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._m(7),a("div",{staticClass:"form-group text-left"},[a("label",{attrs:{for:"content"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitIssue(e)}}}),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"form-control",attrs:{id:"content",rows:"10"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})]),a("div",{staticClass:"py-5 d-flex justify-content-center border border-primary"},[t._v("拖放檔案或是點擊此處上傳")]),a("button",{staticClass:"d-block ml-auto my-3 btn btn-success",on:{click:function(e){return e.preventDefault(),t.submitIssue(e)}}},[t._v("建立問題")])])])]),a("div",{staticClass:"col-3"},[a("ul",{staticClass:"text-left list-group list-group-flush",staticStyle:{border:"1px solid rgba(34,36,38,.15)"}},[t._m(8),a("li",{staticClass:"list-group-item"},[a("div",{staticClass:"dropdown"},[a("a",{staticClass:"btn btn-secondary dropdown-toggle",attrs:{href:"#",role:"button",id:"dropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n                  標籤\n                ")]),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuLink"}},t._l(t.labels,function(e,s){return a("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(a){t.toggleLabel(e.added,e.labelId,s)}}},[t._v(t._s(e.title))])}),0),t._l(t.labels,function(e,s){return[!0===t.labels[s].added?a("h5",[a("span",{staticClass:"badge badge-secondary"},[t._v(t._s(t.labels[s].title))])]):t._e()]})],2)]),a("li",{staticClass:"pb-3 list-group-item"},[t._v("里程碑")]),a("li",{staticClass:"pb-3 list-group-item"},[t._v("指派成員")])])])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ml-auto"},[a("div",{staticClass:"pr-3 btn-group btn-group-toggle",attrs:{"data-toggle":"buttons"}},[a("label",{staticClass:"border border-dark btn"},[a("input",{attrs:{type:"radio",name:"options",id:"option1",autocomplete:"off",checked:""}}),t._v(" 取消關注\n        ")]),a("label",{staticClass:"border border-dark btn"},[a("input",{attrs:{type:"radio",name:"options",id:"option2",autocomplete:"off"}}),t._v(" 8\n        ")])]),a("div",{staticClass:"pr-3 btn-group btn-group-toggle",attrs:{"data-toggle":"buttons"}},[a("label",{staticClass:"border border-dark btn"},[a("input",{attrs:{type:"radio",name:"options",id:"option1",autocomplete:"off",checked:""}}),t._v(" 收藏\n        ")]),a("label",{staticClass:"border border-dark btn"},[a("input",{attrs:{type:"radio",name:"options",id:"option2",autocomplete:"off"}}),t._v(" 0\n        ")])]),a("div",{staticClass:"pr-3 btn-group btn-group-toggle",attrs:{"data-toggle":"buttons"}},[a("label",{staticClass:"border border-dark btn"},[a("input",{attrs:{type:"radio",name:"options",id:"option1",autocomplete:"off",checked:""}}),t._v(" 複製\n        ")]),a("label",{staticClass:"border border-dark btn"},[a("input",{attrs:{type:"radio",name:"options",id:"option2",autocomplete:"off"}}),t._v(" 0\n        ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("程式碼")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("合併請求"),a("span",{staticClass:"ml-2 badge badge-secondary"},[t._v("0")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("版本發佈"),a("span",{staticClass:"ml-2 badge badge-secondary"},[t._v("0")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("Wiki")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("活動")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"ml-auto nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("儲存庫設定")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"nav nav-tabs"},[a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link active",attrs:{href:"#"}},[t._v("Write")])]),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("Preview")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"list-group-item"},[a("input",{staticClass:"form-control",attrs:{type:"text",placeholder:"未指定分支或標籤"}})])}],i=(a("7514"),a("bf48")),r=a.n(i),o={name:"add-issue",components:{AddIssue:u},data:function(){return{proName:"",issues:[],issueAdding:!1,title:"",content:"",username:this.$store.state.user.username,labels:[],checked:[],opened:[],closed:[],showOpened:!0,milestones:[],users:[],orgName:"",orgId:"",mileTitle:"",avatarHash:""}},computed:{proId:function(){return this.$route.params.proId},userId:function(){return this.$store.state.user.input.userId},checking:function(){var t=this;if(0===t.checked.length)return!1}},created:function(){var t=this,e=r.a.Object.extend("Account"),a=new r.a.Query(e);a.get(t.userId).then(function(e){t.avatarHash=e.get("avatarHash")},function(t){})},mounted:function(){var t=this;t.showUser(),t.showProName(),t.showIssue(),t.showLabel(),t.showMilestone()},methods:{showLabel:function(){var t=this,e=r.a.Object.extend("Label"),a=new r.a.Query(e),s=[];console.log(t.proId),a.equalTo("proId",t.proId),a.find().then(function(t){for(var e=0;e<t.length;e++){var a={},n=t[e];a.labelId=n.id,a.title=n.get("title"),a.labelDesc=n.get("labelDesc"),a.issueId=n.get("issueId"),a.added=!1,s.push(a)}},function(t){}),t.labels=s},toggleLabel:function(t,e,a){var s=this;console.log(t,e,a),s.labels[a].added=!s.labels[a].added},showUser:function(){var t=this,e=r.a.Object.extend("Project"),a=new r.a.Query(e),s=[];a.get(t.proId).then(function(e){var a=e.get("orgId"),n=r.a.Object.extend("Organization"),i=new r.a.Query(n);t.orgId=a,i.get(a).then(function(t){for(var e=t.get("memberId"),a=function(t){var a={},n=e[t],i=r.a.Object.extend("Account"),o=new r.a.Query(i);o.get(n).then(function(t){a.name=t.get("username"),a.assigneeId=n,a.avatarHash=t.get("avatarHash"),a.email=t.get("email"),s.push(a)})},n=0;n<e.length;n++)a(n)}),t.users=s},function(t){})},showProName:function(){var t=this,e=t.$route.params.proId,a=r.a.Object.extend("Project"),s=new r.a.Query(a);s.get(e).then(function(e){t.proName=e.get("name"),t.orgName=e.get("orgName")})},showIssue:function(){var t=this,e=r.a.Object.extend("Issue"),a=new r.a.Query(e);a.equalTo("proId",t.proId);var s=[],n=[],i=[];a.find().then(function(t){for(var e=function(e){var a={},o=t[e];a.name=o.get("name"),a.issueId=o.id,a.creator=o.get("creator"),a.issueOpened=o.get("issueOpened"),a.avatarHash=o.get("avatarHash"),a.assigneeId=o.get("assigneeId"),a.mileTitle=o.get("mileTitle");var c=[],l=r.a.Object.extend("Label"),d=new r.a.Query(l);d.equalTo("issueId",o.id),d.find().then(function(t){for(var e=0;e<t.length;e++){var a=t[e];c.push(a.get("title"))}}),a.labels=c,s.push(a),!0===a.issueOpened?n.push(a):!1===a.issueOpened&&i.push(a)},a=0;a<t.length;a++)e(a)}),t.issues=s,t.opened=n,t.closed=i},addIssue:function(){this.issueAdding=!0},submitIssue:function(){var t=this,e=r.a.Object.extend("Issue"),a=new e;new r.a.Query(e);a.set("name",t.title),a.set("content",t.content),a.set("creator",t.$store.state.user.username),a.set("creatorId",t.$store.state.user.input.userId),a.set("issueOpened",!0),a.set("milestone",""),a.set("mileTitle",""),a.set("avatarHash",[]),a.set("orgId",t.orgId),a.set("proId",t.proId),a.set("orgName",t.orgName),a.set("proName",t.proName),a.save().then(function(e){var a=e.id;console.log(a);var s=r.a.Object.extend("Label"),n=new r.a.Query(s);console.log(t.proId),n.equalTo("proId",t.proId),n.find().then(function(t){console.log(a);for(var e=0;e<t.length;e++)t[0]}).then(function(e){t.title="",t.content="",t.showIssue(),t.issueAdding=!1,t.$router.push({name:"project"})})},function(t){alert("Failed to create new object, with error code: "+t.message)})},cancel:function(){this.issueAdding=!1,this.title="",this.content=""},closeIssue:function(){for(var t=this,e=r.a.Object.extend("Issue"),a=0;a<t.checked.length;a++){var s=new r.a.Query(e);s.get(t.checked[a]).then(function(e){e.set("issueOpened",!1),e.save().then(function(){t.showIssue()})},function(t){})}t.checked=[]},reopenIssue:function(){for(var t=this,e=r.a.Object.extend("Issue"),a=0;a<t.checked.length;a++){var s=new r.a.Query(e);s.get(t.checked[a]).then(function(e){e.set("issueOpened",!0),e.save().then(function(){return t.showIssue()})},function(t){})}t.checked=[]},showMilestone:function(){var t=this,e=r.a.Object.extend("Milestone"),a=new r.a.Query(e),s=[];a.equalTo("proId",t.proId),a.find().then(function(t){for(var e=0;e<t.length;e++){var a={},n=t[e];a.mileId=n.id,a.title=n.get("title"),s.push(a)}}),t.milestones=s},addLabelTo:function(t){var e=this,a=r.a.Object.extend("Label"),s=new r.a.Query(a);s.get(t).then(function(t){for(var a=0;a<e.checked.length;a++){var s=e.checked[a];t.addUnique("issueId",s),console.log(s)}t.save().then(function(t){e.showIssue()})},function(t){})},addIssueTo:function(t,e){for(var a=this,s=r.a.Object.extend("Issue"),n=0;n<a.checked.length;n++){var i=new r.a.Query(s);i.get(a.checked[n]).then(function(s){s.set("milestone",t),s.set("mileTitle",e),s.save().then(function(t){a.showIssue(),a.checked=[]});var n=r.a.Object.extend("Milestone"),i=new r.a.Query(n);i.get(t).then(function(t){return t.set("proId",a.proId),t.save()},function(t){})},function(t){})}},assignTo:function(t,e){var a=this,s=r.a.Object.extend("Issue"),n=new r.a.Query(s);n.containedIn("objectId",a.checked),n.find().then(function(n){for(var i=0;i<n.length;i++){var o=n[i],c=new r.a.Query(s);c.get(o.id).then(function(s){s.addUnique("avatarHash",e),s.addUnique("assigneeId",t),s.save().then(function(){a.showIssue(),a.checked=[]})})}})}},watch:{}},c=o,l=(a("9662"),a("2877")),d=Object(l["a"])(c,s,n,!1,null,"2873c798",null),u=e["default"]=d.exports},9662:function(t,e,a){"use strict";var s=a("1d6c"),n=a.n(s);n.a},be134:function(t,e,a){"use strict";var s=a("f4b5"),n=a.n(s);n.a},f4b5:function(t,e,a){}}]);
//# sourceMappingURL=chunk-bcda7f64.eea59ac8.js.map