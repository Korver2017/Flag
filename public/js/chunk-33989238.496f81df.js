(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33989238"],{4601:function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-white"},[a("div",{staticClass:"dropdown"},[a("a",{staticClass:"btn dropdown-toggle",attrs:{href:"#",role:"button",id:"dropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[a("img",{staticClass:"rounded",staticStyle:{width:"30px",height:"30px"},attrs:{src:"https://www.gravatar.com/avatar/"+t.user.avatarHash,alt:""}}),a("span",{staticClass:"mx-2"},[t._v(t._s(t.user.username))])]),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuLink"}},[a("li",{staticClass:"pb-2 d-flex align-items-center justify-content-center"},[t._v("切換控制面板用戶")]),a("hr",{staticClass:"mt-0"}),a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v(t._s(t.user.username))]),t._l(t.orgs,function(s){return a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v(t._s(s.name))])}),a("hr",{staticClass:"mb-0"}),a("router-link",{staticClass:"dropdown-item",attrs:{to:"/org/create",tag:"button","active-class":"active"}},[t._v("\n          新增組織\n        ")])],2)])]),a("hr",{staticClass:"m-0"}),a("div",{attrs:{id:"wrap"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-7"},[a("div",{staticClass:"my-3 mx-2 tracker border border-success"}),a("ul",{staticClass:"py-0 list-group list-group-flush"},t._l(10,function(s){return a("li",{staticClass:"list-group-item"},[t._m(0,!0)])}),0)]),a("div",{staticClass:"px-0 my-3 col-4"},[a("div",{staticClass:"px-0 btn-group col-12",staticStyle:{color:"#767676"},attrs:{role:"group","aria-label":"Basic example"}},[a("button",{staticClass:"py-3 btn btn-outline-secondary col-6",on:{click:t.switchToRepo}},[t._v("\n              儲存庫\n            ")]),a("button",{staticClass:"py-3 btn btn-outline-secondary col-6",on:{click:t.switchToOrg}},[t._v("\n              組織\n            ")])]),!0===t.showRepoList?a("div",{staticClass:"my-3"},[a("ul",{staticClass:"list-group"},[a("li",{staticClass:"list-group-item"},[a("div",{staticClass:"row"},[a("p",{staticClass:"ml-3 mb-0"},[t._v("儲存庫"),a("span",{staticClass:"ml-2 badge badge-secondary"},[t._v(t._s(t.projects.length))])]),a("div",{staticClass:"d-flex align-items-center ml-auto mr-3"},[a("router-link",{attrs:{to:"/project/create",tag:"a","active-class":"active"}},[a("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})])],1)])]),a("li",{staticClass:"list-group-item"},[t._m(1),a("ul",{staticClass:"nav nav-tabs d-flex justify-content-center"},[a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link active",attrs:{href:"#"}},[t._v("所有"),a("span",{staticClass:"ml-2 badge badge-secondary"},[t._v(t._s(t.projects.length))])])]),t._m(2),t._m(3),t._m(4),t._m(5)])]),t._l(t.projects,function(s){return t.projects?a("router-link",{staticClass:"d-flex align-items-center list-group-item",attrs:{to:{name:"project",params:{orgId:s.orgId,proId:s.proId}},tag:"button"}},[a("i",{staticClass:"mr-3 fa fa-lock",staticStyle:{"font-size":"25px"},attrs:{"aria-hidden":"true"}}),t._v("\n\n                "+t._s(s.orgName)+" / "+t._s(s.name)+"\n\n                "),a("p",{staticClass:"ml-auto mb-0 d-flex align-items-center"},[t._v("\n                  0\n                  "),a("i",{staticClass:"ml-1 fa fa-star",staticStyle:{"font-size":"20px"},attrs:{"aria-hidden":"true"}})])]):t._e()}),a("router-link",{staticClass:"d-flex align-items-center list-group-item",attrs:{to:"/",tag:"button"}},[t._v("\n\n                顯示更多儲存庫...\n                \n              ")])],2)]):t._e(),!0===t.showOrgList?a("div",{staticClass:"my-3"},[a("ul",{staticClass:"list-group"},[a("li",{staticClass:"list-group-item"},[a("div",{staticClass:"row"},[a("p",{staticClass:"ml-3 mb-0"},[t._v("我的組織"),a("span",{staticClass:"ml-2 badge badge-secondary"},[t._v(t._s(t.orgs.length))])]),a("div",{staticClass:"d-flex align-items-center ml-auto mr-3"},[a("router-link",{attrs:{to:"/org/create",tag:"a","active-class":"active"}},[a("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})])],1)])]),t._l(t.orgs,function(s){return a("li",{staticClass:"d-flex align-items-center list-group-item"},[a("i",{staticClass:"mr-3 fa fa-lock",staticStyle:{"font-size":"25px"},attrs:{"aria-hidden":"true"}}),t._v("\n                \n                "+t._s(s.name)+"\n\n                "),t._m(6,!0)])})],2)]):t._e()])])])])},r=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"row"},[a("div",{staticClass:"avatar border border-success"}),a("div",{staticClass:"ml-3 text-left"},[a("p",{staticClass:"infoTitle"},[t._v("wake pushed to master at Tangency/wingbra")]),a("div",[a("p",{staticClass:"mb-0"},[t._v("Lorem ipsum dolor sit amet.")]),a("p",{staticClass:"mb-0"},[t._v("Lorem, ipsum dolor.")])])]),a("i",{staticClass:"ml-auto mr-4 fa fa-exclamation-circle",staticStyle:{"font-size":"40px",color:"#767676"},attrs:{"aria-hidden":"true"}})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"input-group mb-3"},[a("input",{staticClass:"form-control",attrs:{type:"text",placeholder:"搜尋儲存庫..."}})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("來源")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("複製列表")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("鏡像")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("協同者")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",{staticClass:"ml-auto mb-0 d-flex align-items-center"},[t._v("\n                  0\n                  "),a("i",{staticClass:"ml-1 fa fa-star",staticStyle:{"font-size":"20px"},attrs:{"aria-hidden":"true"}})])}],i=(a("7514"),a("bf48")),n=a.n(i),o={name:"dashboard",components:{},data:function(){return{orgName:"",orgs:[],projects:[],issues:[],assigneeList:[],userData:"",token:"",payload:"",showRepoList:!0,showOrgList:!1}},created:function(){},computed:{user:function(){return{authed:this.$store.state.user.authed,userId:this.$store.state.user.userId,avatarHash:this.$store.state.user.avatarHash,username:this.$store.state.user.username}}},mounted:function(){this.showOrg(),this.showUsername(),this.showProject(),this.showIssue(),this.showAssignee()},methods:{switchToRepo:function(){var t=this;t.showRepoList=!0,t.showOrgList=!1},switchToOrg:function(){var t=this;t.showRepoList=!1,t.showOrgList=!0},showUsername:function(){},showOrg:function(){var t=this,s=n.a.Object.extend("Organization"),a=new n.a.Query(s),e=[];a.equalTo("memberId",t.user.userId),a.find().then(function(a){for(var r=function(t){var r={},i=a[t],o=new n.a.Query(s);r.orgId=i.id,o.get(i.id).then(function(t){r.name=t.get("name"),e.push(r)})},i=0;i<a.length;i++)r(i);t.orgs=e})},addOrganization:function(){var t=this;if(""!==t.orgName){var s=n.a.Object.extend("Organization"),a=new s;a.set("name",t.orgName),a.set("memberId",t.payload),a.save().then(function(s){t.orgName="",t.showOrg()},function(t){})}else alert("組織名稱不可空白")},showProject:function(){var t=this,s=[],a=n.a.Object.extend("Organization"),e=new n.a.Query(a);e.equalTo("memberId",t.user.userId),e.find().then(function(a){for(var e=0;e<a.length;e++){var r=a[e],i=n.a.Object.extend("Project"),o=new n.a.Query(i);o.equalTo("orgId",r.id),o.find().then(function(a){for(var e=0;e<a.length;e++){var r={},i=a[e];r.orgName=i.get("orgName"),r.name=i.get("name"),r.orgId=i.get("orgId"),r.proId=i.id,s.push(r)}t.projects=s})}})},showIssue:function(){var t=this,s=n.a.Object.extend("Organization"),a=new n.a.Query(s),e=[];a.equalTo("memberId",t.user.userId),a.find().then(function(t){for(var s=0;s<t.length;s++){var a=t[s];e.push(a.id)}return e}).then(function(s){var a=[],e=n.a.Object.extend("Project"),r=new n.a.Query(e);r.containedIn("orgId",s),r.find().then(function(t){for(var s=0;s<t.length;s++){var e=t[s];a.push(e.id)}return a}).then(function(s){var a=[],e={},r=n.a.Object.extend("Issue"),i=new n.a.Query(r);i.containedIn("proId",s),i.find().then(function(s){for(var r=0;r<s.length;r++){var i=s[r];e.issueId=i.id,e.orgId=i.get("orgId"),e.proId=i.get("proId"),e.proName=i.get("proName"),e.orgName=i.get("orgName"),e.issueName=i.get("name"),a.push(e),e={}}t.issues=a})})})},showAssignee:function(){var t=this,s=[],a=n.a.Object.extend("Issue"),e=new n.a.Query(a);e.equalTo("assigneeId",t.user.id),e.find().then(function(t){for(var a=0;a<t.length;a++){var e={},r=t[a];e.assignIssue=r.get("name"),e.issueId=r.id,e.orgId=r.get("orgId"),e.proId=r.get("proId"),e.orgName=r.get("orgName"),e.proName=r.get("proName"),s.push(e)}},function(t){}),t.assigneeList=s}},watch:{}},l=o,c=(a("d57e"),a("2877")),u=Object(c["a"])(l,e,r,!1,null,"7e213d6a",null);s["default"]=u.exports},d57e:function(t,s,a){"use strict";var e=a("d8da"),r=a.n(e);r.a},d8da:function(t,s,a){}}]);
//# sourceMappingURL=chunk-33989238.496f81df.js.map